<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>SamuFlore&#39;s Dimension</title>
    <link>https://samuflore.top/</link>
    
    <atom:link href="https://samuflore.top/rss2.xml" rel="self" type="application/rss+xml"/>
    
    <description>一人倒、衆人倒。</description>
    <pubDate>Sun, 21 Dec 2025 08:18:11 GMT</pubDate>
    <generator>http://hexo.io/</generator>
    
    <item>
      <title>[概率與數理模型]概统概要</title>
      <link>https://samuflore.top/posts/b1cdfa63/</link>
      <guid>https://samuflore.top/posts/b1cdfa63/</guid>
      <pubDate>Sun, 21 Dec 2025 08:10:52 GMT</pubDate>
      
      
      
      
      <category domain="https://samuflore.top/categories/2025-2026-%E5%AD%B8%E5%B9%B4/">2025 - 2026 學年</category>
      
      <category domain="https://samuflore.top/categories/2025-2026-%E5%AD%B8%E5%B9%B4/%E6%A6%82%E7%8E%87%E8%88%87%E6%95%B8%E7%90%86%E6%A8%A1%E5%9E%8B/">概率與數理模型</category>
      
      
      <category domain="https://samuflore.top/tags/Mathematics/">Mathematics</category>
      
      <category domain="https://samuflore.top/tags/Probability-Theory/">Probability Theory</category>
      
      <category domain="https://samuflore.top/tags/Statistics/">Statistics</category>
      
      
      <comments>https://samuflore.top/posts/b1cdfa63/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>[離散數學]离散数学 II 概要</title>
      <link>https://samuflore.top/posts/9a8a7cf0/</link>
      <guid>https://samuflore.top/posts/9a8a7cf0/</guid>
      <pubDate>Sun, 21 Dec 2025 08:09:57 GMT</pubDate>
      
      
      
      
      <category domain="https://samuflore.top/categories/2025-2026-%E5%AD%B8%E5%B9%B4/">2025 - 2026 學年</category>
      
      <category domain="https://samuflore.top/categories/2025-2026-%E5%AD%B8%E5%B9%B4/%E9%9B%A2%E6%95%A3%E6%95%B8%E5%AD%B8/">離散數學</category>
      
      
      <category domain="https://samuflore.top/tags/Mathematics/">Mathematics</category>
      
      <category domain="https://samuflore.top/tags/Discrete-Mathematics/">Discrete Mathematics</category>
      
      
      <comments>https://samuflore.top/posts/9a8a7cf0/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>[基礎物理學]基础物理学 B II 概要</title>
      <link>https://samuflore.top/posts/585cfa20/</link>
      <guid>https://samuflore.top/posts/585cfa20/</guid>
      <pubDate>Sun, 21 Dec 2025 08:09:13 GMT</pubDate>
      
      <description>&lt;h1 id=&quot;序&quot;&gt;序&lt;/h1&gt;
&lt;p&gt;这是基础物理学 B (II) 复习概要，内含&lt;a href=&quot;#%E6%B0%94%E4%BD%93%E5%8A%A8%E7%90%86%E8%AE%BA&quot;&gt;气体动理论&lt;/a&gt;，&lt;a href=&quot;#%E7%83%AD%E5%8A%9B%E5%AD%A6%E5%9F%BA%E7%A1%80&quot;&gt;热力学基础&lt;/a&gt;，&lt;a href=&quot;#%E6%9C%BA%E6%A2%B0%E6%8C%AF%E5%8A%A8%E5%92%8C%E7%94%B5%E7%A3%81%E6%8C%AF%E8%8D%A1&quot;&gt;机械振动和电磁振荡&lt;/a&gt;，&lt;a href=&quot;#%E6%9C%BA%E6%A2%B0%E6%B3%A2%E5%92%8C%E7%94%B5%E7%A3%81%E6%B3%A2&quot;&gt;机械波和电磁波&lt;/a&gt;，&lt;a href=&quot;#%E5%85%89%E5%AD%A6&quot;&gt;光学&lt;/a&gt;以及&lt;a href=&quot;#%E6%97%A9%E6%9C%9F%E9%87%8F%E5%AD%90%E8%AE%BA%E5%92%8C%E9%87%8F%E5%AD%90%E5%8A%9B%E5%AD%A6%E5%9F%BA%E7%A1%80&quot;&gt;早期量子论和量子力学基础&lt;/a&gt;。&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<h1 id="序">序</h1><p>这是基础物理学 B (II) 复习概要，内含<a href="#%E6%B0%94%E4%BD%93%E5%8A%A8%E7%90%86%E8%AE%BA">气体动理论</a>，<a href="#%E7%83%AD%E5%8A%9B%E5%AD%A6%E5%9F%BA%E7%A1%80">热力学基础</a>，<a href="#%E6%9C%BA%E6%A2%B0%E6%8C%AF%E5%8A%A8%E5%92%8C%E7%94%B5%E7%A3%81%E6%8C%AF%E8%8D%A1">机械振动和电磁振荡</a>，<a href="#%E6%9C%BA%E6%A2%B0%E6%B3%A2%E5%92%8C%E7%94%B5%E7%A3%81%E6%B3%A2">机械波和电磁波</a>，<a href="#%E5%85%89%E5%AD%A6">光学</a>以及<a href="#%E6%97%A9%E6%9C%9F%E9%87%8F%E5%AD%90%E8%AE%BA%E5%92%8C%E9%87%8F%E5%AD%90%E5%8A%9B%E5%AD%A6%E5%9F%BA%E7%A1%80">早期量子论和量子力学基础</a>。</p><span id="more"></span><h1 id="气体动理论">气体动理论</h1><h2 id="气体的物态方程">气体的物态方程</h2><ul class="lvl-0"><li class="lvl-2"><p>平衡态：不受外界影响的条件下，系统的宏观性质不随着时间变化的状态。反之称为非平衡态</p></li><li class="lvl-2"><p>准静态过程：气体状态变化过程极其缓慢，以至于每个中间状态都无限接近于平衡态</p></li><li class="lvl-2"><p>状态参量</p><ul class="lvl-2"><li class="lvl-4"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span>：质量 (kg)</li><li class="lvl-4"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span>：摩尔质量 (kg/mol)</li><li class="lvl-4"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi></mrow><annotation encoding="application/x-tex">V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span>：体积 (m~3~)</li><li class="lvl-4"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span>：压强 (Pa, N/m~3~)</li><li class="lvl-4"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span>：温度 (K)</li></ul></li><li class="lvl-2"><p>理想气体：遵守玻意耳定律，盖-吕萨克定律和查理定律的气体</p></li><li class="lvl-2"><p>理想气体状态方程</p></li></ul><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>p</mi><mi>V</mi><mo>=</mo><mfrac><mi>m</mi><mi>M</mi></mfrac><mi>R</mi><mi>T</mi><mspace linebreak="newline"></mspace><mtext>or</mtext><mspace linebreak="newline"></mspace><mi>p</mi><mi>V</mi><mo>=</mo><mi>n</mi><mi>R</mi><mi>T</mi><mspace linebreak="newline"></mspace></mrow><annotation encoding="application/x-tex">pV=\frac{m}{M}RT\\\text{or}\\pV=nRT\\</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.7936em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord text"><span class="mord">or</span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span></span><span class="mspace newline"></span></span></span></span><ul class="lvl-0"><li class="lvl-2"><p>R 称为普适气体常量</p></li><li class="lvl-2"><p>理想气体的微观模型</p><ul class="lvl-2"><li class="lvl-4">分子大小忽略不计</li><li class="lvl-4">除碰撞，分子间作用力忽略</li><li class="lvl-4">所有碰撞是完全弹性碰撞</li><li class="lvl-4"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><msup><mi>v</mi><mn>2</mn></msup><mo>ˉ</mo></mover><mo>=</mo><mover accent="true"><msubsup><mi>v</mi><mi>x</mi><mn>2</mn></msubsup><mo>ˉ</mo></mover><mo>+</mo><mover accent="true"><msubsup><mi>v</mi><mi>y</mi><mn>2</mn></msubsup><mo>ˉ</mo></mover><mo>+</mo><mover accent="true"><msubsup><mi>v</mi><mi>z</mi><mn>2</mn></msubsup><mo>ˉ</mo></mover></mrow><annotation encoding="application/x-tex">\bar{v^2}=\bar{v^2_x}+\bar{v^2_y}+\bar{v^2_z}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8769em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8769em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span style="top:-3.3091em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;"><span class="mord">ˉ</span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1239em;vertical-align:-0.247em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8769em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.453em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span></span><span style="top:-3.3091em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;"><span class="mord">ˉ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.26em;vertical-align:-0.3831em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8769em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.453em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span></span></span></span></span></span></span></span><span style="top:-3.3091em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;"><span class="mord">ˉ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3831em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1239em;vertical-align:-0.247em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8769em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.453em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span></span></span><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span></span><span style="top:-3.3091em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;"><span class="mord">ˉ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span></span></span>，即分子速度分量平方平均值相等，且等于速率平方平均值的 1/3</li></ul></li><li class="lvl-2"><p>范德华方程</p></li></ul><h2 id="理想气体的压强和温度公式">理想气体的压强和温度公式</h2><ul class="lvl-0"><li class="lvl-2"><p>布朗运动</p></li><li class="lvl-2"><p>气体动理论的压强公式：<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>p</mi><mo>=</mo><mfrac><mn>2</mn><mn>3</mn></mfrac><mi>n</mi><mover accent="true"><msub><mi>ε</mi><mi>k</mi></msub><mo>ˉ</mo></mover></mrow><annotation encoding="application/x-tex">p=\frac{2}{3}n\bar{\varepsilon_k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.0074em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathnormal">n</span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.5678em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">ε</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;"><span class="mord">ˉ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><msub><mi>ε</mi><mi>k</mi></msub><mo>ˉ</mo></mover></mrow><annotation encoding="application/x-tex">\bar{\varepsilon_k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7178em;vertical-align:-0.15em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.5678em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">ε</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;"><span class="mord">ˉ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span> 是分子平均平动动能，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 是气体分子数密度，即 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>=</mo><mfrac><mi>N</mi><mi>V</mi></mfrac></mrow><annotation encoding="application/x-tex">n=\frac{N}{V}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.2173em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8723em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">V</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p></li><li class="lvl-2"><p>温度的本质：气体分子平均平动动能的量度。 <span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mover accent="true"><msub><mi>ε</mi><mi>k</mi></msub><mo>ˉ</mo></mover><mo>=</mo><mfrac><mn>3</mn><mn>2</mn></mfrac><mi>k</mi><mi>T</mi></mrow><annotation encoding="application/x-tex">\bar{\varepsilon_k}=\frac{3}{2}kT</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7178em;vertical-align:-0.15em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.5678em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">ε</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;"><span class="mord">ˉ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.0074em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span></span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> 称为玻尔兹曼常量，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>=</mo><mfrac><mi>R</mi><msub><mi>N</mi><mi>A</mi></msub></mfrac></mrow><annotation encoding="application/x-tex">k=\frac{R}{N_A}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3176em;vertical-align:-0.4453em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8723em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567em;margin-left:-0.109em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4453em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>，其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>N</mi><mi>A</mi></msub></mrow><annotation encoding="application/x-tex">N_A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 是阿伏伽德罗常数</p></li><li class="lvl-2"><p>上述两条综合得到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo>=</mo><mi>n</mi><mi>k</mi><mi>T</mi></mrow><annotation encoding="application/x-tex">p=nkT</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">nk</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span>，从理想气体状态方程推出，则为</p></li></ul><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>p</mi><mi>V</mi><mo>=</mo><mfrac><mi>N</mi><msub><mi>N</mi><mi>A</mi></msub></mfrac><mi>R</mi><mi>T</mi><mo>→</mo><mi>p</mi><mo>=</mo><mfrac><mi>N</mi><mi>V</mi></mfrac><mfrac><mi>R</mi><msub><mi>N</mi><mi>A</mi></msub></mfrac><mi>T</mi></mrow><annotation encoding="application/x-tex">pV=\frac{N}{N_A}RT \rightarrow p=\frac{N}{V}\frac{R}{N_A}T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.1963em;vertical-align:-0.836em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.836em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.1963em;vertical-align:-0.836em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.836em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span></span><ul class="lvl-0"><li class="lvl-2"><p>气体分子的方均根速率：<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>v</mi><mrow><mi>r</mi><mi>m</mi><mi>s</mi></mrow></msub><mo>=</mo><msqrt><mover accent="true"><msup><mi>v</mi><mn>2</mn></msup><mo>ˉ</mo></mover></msqrt><mo>=</mo><msqrt><mfrac><mrow><mn>3</mn><mi>k</mi><mi>T</mi></mrow><msub><mi>m</mi><mn>0</mn></msub></mfrac></msqrt><mo>=</mo><msqrt><mfrac><mrow><mn>3</mn><mi>R</mi><mi>T</mi></mrow><mi>M</mi></mfrac></msqrt></mrow><annotation encoding="application/x-tex">v_{rms}=\sqrt{\bar{v^2}}=\sqrt{\frac{3kT}{m_0}}=\sqrt{\frac{3RT}{M}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.24em;vertical-align:-0.0677em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1723em;"><span class="svg-align" style="top:-3.2em;"><span class="pstrut" style="height:3.2em;"></span><span class="mord" style="padding-left:1em;"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8769em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span style="top:-3.3091em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;"><span class="mord">ˉ</span></span></span></span></span></span></span></span></span><span style="top:-3.1323em;"><span class="pstrut" style="height:3.2em;"></span><span class="hide-tail" style="min-width:1.02em;height:1.28em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.28em" viewbox="0 0 400000 1296" preserveaspectratio="xMinYMin slice"><path d="M263,681c0.7,0,18,39.7,52,119c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120c340,-704.7,510.7,-1060.3,512,-1067l0 -0c4.7,-7.3,11,-11,19,-11H40000v40H1012.3s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60zM1001 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.0677em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.44em;vertical-align:-0.8384em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6016em;"><span class="svg-align" style="top:-4.4em;"><span class="pstrut" style="height:4.4em;"></span><span class="mord" style="padding-left:1em;"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.836em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.5616em;"><span class="pstrut" style="height:4.4em;"></span><span class="hide-tail" style="min-width:1.02em;height:2.48em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="2.48em" viewbox="0 0 400000 2592" preserveaspectratio="xMinYMin slice"><path d="M424,2478c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081l0 -0c4,-6.7,10,-10,18,-10 H400000v40H1014.6s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185c-2,6,-10,9,-24,9c-8,0,-12,-0.7,-12,-2z M1001 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8384em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.44em;vertical-align:-0.769em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.671em;"><span class="svg-align" style="top:-4.4em;"><span class="pstrut" style="height:4.4em;"></span><span class="mord" style="padding-left:1em;"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.631em;"><span class="pstrut" style="height:4.4em;"></span><span class="hide-tail" style="min-width:1.02em;height:2.48em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="2.48em" viewbox="0 0 400000 2592" preserveaspectratio="xMinYMin slice"><path d="M424,2478c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081l0 -0c4,-6.7,10,-10,18,-10 H400000v40H1014.6s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185c-2,6,-10,9,-24,9c-8,0,-12,-0.7,-12,-2z M1001 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.769em;"><span></span></span></span></span></span></span></span></span></span> 其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>m</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">m_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 是单个分子的质量</p></li></ul><h2 id="能量均分定理-理想气体的内能">能量均分定理 理想气体的内能</h2><ul class="lvl-0"><li class="lvl-2"><p>分子自由度</p></li><li class="lvl-2"><p>能量均分定理：如果气体分子有 i 个自由度，那么每个分子的平均总动能是 <span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mover accent="true"><msub><mi>ε</mi><mi>k</mi></msub><mo>ˉ</mo></mover><mo>=</mo><mfrac><mi>i</mi><mn>2</mn></mfrac><mi>k</mi><mi>T</mi></mrow><annotation encoding="application/x-tex">\bar{\varepsilon_k}=\frac{i}{2}kT</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7178em;vertical-align:-0.15em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.5678em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">ε</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;"><span class="mord">ˉ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.0225em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3365em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span></span> （注意辨别平均总动能和平均平动动能，实则平均平动动能的 3/2 正是平动自由度的体现）</p></li><li class="lvl-2"><p>理想气体的内能：n mol 理想气体的内能是 <span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>E</mi><mo>=</mo><mi>n</mi><mfrac><mi>i</mi><mn>2</mn></mfrac><mi>R</mi><mi>T</mi><mo>=</mo><mfrac><mi>m</mi><mi>M</mi></mfrac><mfrac><mi>i</mi><mn>2</mn></mfrac><mi>R</mi><mi>T</mi></mrow><annotation encoding="application/x-tex">E=n\frac{i}{2}RT=\frac{m}{M}\frac{i}{2}RT</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.0225em;vertical-align:-0.686em;"></span><span class="mord mathnormal">n</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3365em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.0225em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3365em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span></span></span></span></span></p></li></ul><h2 id="麦克斯韦速率分布">麦克斯韦速率分布</h2><p>以下所有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>m</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">m_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 指代单个分子质量</p><ul class="lvl-0"><li class="lvl-2"><p>分子平均速率</p></li></ul><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mover accent="true"><mi>v</mi><mo>ˉ</mo></mover><mo>=</mo><msqrt><mfrac><mrow><mn>8</mn><mi>k</mi><mi>T</mi></mrow><mrow><mi>π</mi><msub><mi>m</mi><mn>0</mn></msub></mrow></mfrac></msqrt><mo>=</mo><msqrt><mfrac><mrow><mn>8</mn><mi>R</mi><mi>T</mi></mrow><mrow><mi>π</mi><mi>M</mi></mrow></mfrac></msqrt><mo>=</mo><mn>1.60</mn><msqrt><mfrac><mrow><mi>R</mi><mi>T</mi></mrow><mi>M</mi></mfrac></msqrt></mrow><annotation encoding="application/x-tex">\bar{v}=\sqrt{\frac{8kT}{\pi m_0}}=\sqrt{\frac{8RT}{\pi M}}=1.60\sqrt{\frac{RT}{M}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5678em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5678em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">ˉ</span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.44em;vertical-align:-0.8384em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6016em;"><span class="svg-align" style="top:-4.4em;"><span class="pstrut" style="height:4.4em;"></span><span class="mord" style="padding-left:1em;"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">8</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.836em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.5616em;"><span class="pstrut" style="height:4.4em;"></span><span class="hide-tail" style="min-width:1.02em;height:2.48em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="2.48em" viewbox="0 0 400000 2592" preserveaspectratio="xMinYMin slice"><path d="M424,2478c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081l0 -0c4,-6.7,10,-10,18,-10 H400000v40H1014.6s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185c-2,6,-10,9,-24,9c-8,0,-12,-0.7,-12,-2z M1001 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8384em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.44em;vertical-align:-0.769em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.671em;"><span class="svg-align" style="top:-4.4em;"><span class="pstrut" style="height:4.4em;"></span><span class="mord" style="padding-left:1em;"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">8</span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.631em;"><span class="pstrut" style="height:4.4em;"></span><span class="hide-tail" style="min-width:1.02em;height:2.48em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="2.48em" viewbox="0 0 400000 2592" preserveaspectratio="xMinYMin slice"><path d="M424,2478c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081l0 -0c4,-6.7,10,-10,18,-10 H400000v40H1014.6s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185c-2,6,-10,9,-24,9c-8,0,-12,-0.7,-12,-2z M1001 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.769em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.44em;vertical-align:-0.769em;"></span><span class="mord">1.60</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.671em;"><span class="svg-align" style="top:-4.4em;"><span class="pstrut" style="height:4.4em;"></span><span class="mord" style="padding-left:1em;"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.631em;"><span class="pstrut" style="height:4.4em;"></span><span class="hide-tail" style="min-width:1.02em;height:2.48em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="2.48em" viewbox="0 0 400000 2592" preserveaspectratio="xMinYMin slice"><path d="M424,2478c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081l0 -0c4,-6.7,10,-10,18,-10 H400000v40H1014.6s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185c-2,6,-10,9,-24,9c-8,0,-12,-0.7,-12,-2z M1001 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.769em;"><span></span></span></span></span></span></span></span></span></span><ul class="lvl-0"><li class="lvl-2"><p>方均根速率</p></li></ul><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>v</mi><mrow><mi>r</mi><mi>m</mi><mi>s</mi></mrow></msub><mo>=</mo><msqrt><mover accent="true"><msup><mi>v</mi><mn>2</mn></msup><mo>ˉ</mo></mover></msqrt><mo>=</mo><msqrt><mfrac><mrow><mn>3</mn><mi>k</mi><mi>T</mi></mrow><msub><mi>m</mi><mn>0</mn></msub></mfrac></msqrt><mo>=</mo><msqrt><mfrac><mrow><mn>3</mn><mi>R</mi><mi>T</mi></mrow><mi>M</mi></mfrac></msqrt><mo>=</mo><mn>1.73</mn><msqrt><mfrac><mrow><mi>R</mi><mi>T</mi></mrow><mi>M</mi></mfrac></msqrt></mrow><annotation encoding="application/x-tex">v_{rms}=\sqrt{\bar{v^2}}=\sqrt{\frac{3kT}{m_0}}=\sqrt{\frac{3RT}{M}}=1.73\sqrt{\frac{RT}{M}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.24em;vertical-align:-0.0677em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1723em;"><span class="svg-align" style="top:-3.2em;"><span class="pstrut" style="height:3.2em;"></span><span class="mord" style="padding-left:1em;"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8769em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span style="top:-3.3091em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;"><span class="mord">ˉ</span></span></span></span></span></span></span></span></span><span style="top:-3.1323em;"><span class="pstrut" style="height:3.2em;"></span><span class="hide-tail" style="min-width:1.02em;height:1.28em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.28em" viewbox="0 0 400000 1296" preserveaspectratio="xMinYMin slice"><path d="M263,681c0.7,0,18,39.7,52,119c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120c340,-704.7,510.7,-1060.3,512,-1067l0 -0c4.7,-7.3,11,-11,19,-11H40000v40H1012.3s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60zM1001 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.0677em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.44em;vertical-align:-0.8384em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6016em;"><span class="svg-align" style="top:-4.4em;"><span class="pstrut" style="height:4.4em;"></span><span class="mord" style="padding-left:1em;"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.836em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.5616em;"><span class="pstrut" style="height:4.4em;"></span><span class="hide-tail" style="min-width:1.02em;height:2.48em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="2.48em" viewbox="0 0 400000 2592" preserveaspectratio="xMinYMin slice"><path d="M424,2478c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081l0 -0c4,-6.7,10,-10,18,-10 H400000v40H1014.6s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185c-2,6,-10,9,-24,9c-8,0,-12,-0.7,-12,-2z M1001 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8384em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.44em;vertical-align:-0.769em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.671em;"><span class="svg-align" style="top:-4.4em;"><span class="pstrut" style="height:4.4em;"></span><span class="mord" style="padding-left:1em;"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.631em;"><span class="pstrut" style="height:4.4em;"></span><span class="hide-tail" style="min-width:1.02em;height:2.48em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="2.48em" viewbox="0 0 400000 2592" preserveaspectratio="xMinYMin slice"><path d="M424,2478c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081l0 -0c4,-6.7,10,-10,18,-10 H400000v40H1014.6s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185c-2,6,-10,9,-24,9c-8,0,-12,-0.7,-12,-2z M1001 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.769em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.44em;vertical-align:-0.769em;"></span><span class="mord">1.73</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.671em;"><span class="svg-align" style="top:-4.4em;"><span class="pstrut" style="height:4.4em;"></span><span class="mord" style="padding-left:1em;"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.631em;"><span class="pstrut" style="height:4.4em;"></span><span class="hide-tail" style="min-width:1.02em;height:2.48em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="2.48em" viewbox="0 0 400000 2592" preserveaspectratio="xMinYMin slice"><path d="M424,2478c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081l0 -0c4,-6.7,10,-10,18,-10 H400000v40H1014.6s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185c-2,6,-10,9,-24,9c-8,0,-12,-0.7,-12,-2z M1001 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.769em;"><span></span></span></span></span></span></span></span></span></span><ul class="lvl-0"><li class="lvl-2"><p>最概然速率</p></li></ul><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>v</mi><mi>p</mi></msub><mo>=</mo><msqrt><mfrac><mrow><mn>2</mn><mi>k</mi><mi>T</mi></mrow><msub><mi>m</mi><mn>0</mn></msub></mfrac></msqrt><mo>=</mo><msqrt><mfrac><mrow><mn>2</mn><mi>R</mi><mi>T</mi></mrow><mi>M</mi></mfrac></msqrt><mo>=</mo><mn>1.41</mn><msqrt><mfrac><mrow><mi>R</mi><mi>T</mi></mrow><mi>M</mi></mfrac></msqrt></mrow><annotation encoding="application/x-tex">v_p=\sqrt{\frac{2kT}{m_0}}=\sqrt{\frac{2RT}{M}}=1.41\sqrt{\frac{RT}{M}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.44em;vertical-align:-0.8384em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6016em;"><span class="svg-align" style="top:-4.4em;"><span class="pstrut" style="height:4.4em;"></span><span class="mord" style="padding-left:1em;"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.836em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.5616em;"><span class="pstrut" style="height:4.4em;"></span><span class="hide-tail" style="min-width:1.02em;height:2.48em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="2.48em" viewbox="0 0 400000 2592" preserveaspectratio="xMinYMin slice"><path d="M424,2478c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081l0 -0c4,-6.7,10,-10,18,-10 H400000v40H1014.6s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185c-2,6,-10,9,-24,9c-8,0,-12,-0.7,-12,-2z M1001 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8384em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.44em;vertical-align:-0.769em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.671em;"><span class="svg-align" style="top:-4.4em;"><span class="pstrut" style="height:4.4em;"></span><span class="mord" style="padding-left:1em;"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.631em;"><span class="pstrut" style="height:4.4em;"></span><span class="hide-tail" style="min-width:1.02em;height:2.48em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="2.48em" viewbox="0 0 400000 2592" preserveaspectratio="xMinYMin slice"><path d="M424,2478c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081l0 -0c4,-6.7,10,-10,18,-10 H400000v40H1014.6s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185c-2,6,-10,9,-24,9c-8,0,-12,-0.7,-12,-2z M1001 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.769em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.44em;vertical-align:-0.769em;"></span><span class="mord">1.41</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.671em;"><span class="svg-align" style="top:-4.4em;"><span class="pstrut" style="height:4.4em;"></span><span class="mord" style="padding-left:1em;"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.631em;"><span class="pstrut" style="height:4.4em;"></span><span class="hide-tail" style="min-width:1.02em;height:2.48em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="2.48em" viewbox="0 0 400000 2592" preserveaspectratio="xMinYMin slice"><path d="M424,2478c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081l0 -0c4,-6.7,10,-10,18,-10 H400000v40H1014.6s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185c-2,6,-10,9,-24,9c-8,0,-12,-0.7,-12,-2z M1001 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.769em;"><span></span></span></span></span></span></span></span></span></span><p>所以 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mrow><mi>r</mi><mi>m</mi><mi>s</mi></mrow></msub><mo>&gt;</mo><mover accent="true"><mi>v</mi><mo>ˉ</mo></mover><mo>&gt;</mo><msub><mi>v</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">v_{rms}&gt;\bar{v}&gt;v_p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6891em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6069em;vertical-align:-0.0391em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5678em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">ˉ</span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></p><h2 id="分子碰撞与平均自由程">分子碰撞与平均自由程</h2><ul class="lvl-0"><li class="lvl-2"><p>平均碰撞次数以下所有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 为单位体积内的分子数<br>以下所有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">d</span></span></span></span> 为分子的直径（或有效直径，即两分子质心之间的最小距离的平均值）</p></li></ul><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mover accent="true"><mi>Z</mi><mo>ˉ</mo></mover><mo>=</mo><msqrt><mn>2</mn></msqrt><mi>π</mi><msup><mi>d</mi><mn>2</mn></msup><mover accent="true"><mi>v</mi><mo>ˉ</mo></mover><mi>n</mi></mrow><annotation encoding="application/x-tex">\bar{Z}=\sqrt{2}\pi d^2\bar{v}n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8201em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8201em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span></span><span style="top:-3.2523em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1667em;"><span class="mord">ˉ</span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.0839em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9561em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">2</span></span></span><span style="top:-2.9161em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.0839em;"><span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5678em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">ˉ</span></span></span></span></span></span></span><span class="mord mathnormal">n</span></span></span></span></span><ul class="lvl-0"><li class="lvl-2"><p>分子平均自由程</p></li></ul><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mover accent="true"><mi>λ</mi><mo>ˉ</mo></mover><mo>=</mo><mfrac><mover accent="true"><mi>v</mi><mo>ˉ</mo></mover><mover accent="true"><mi>Z</mi><mo>ˉ</mo></mover></mfrac><mo>=</mo><mfrac><mn>1</mn><mrow><msqrt><mn>2</mn></msqrt><mi>π</mi><msup><mi>d</mi><mn>2</mn></msup><mi>n</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\bar{\lambda}=\frac{\bar{v}}{\bar{Z}}=\frac{1}{\sqrt{2}\pi d^2n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8312em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8312em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">λ</span></span><span style="top:-3.2634em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;"><span class="mord">ˉ</span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.9549em;vertical-align:-0.7101em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.2448em;"><span style="top:-2.2899em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8201em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span></span><span style="top:-3.2523em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1667em;"><span class="mord">ˉ</span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5678em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">ˉ</span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7101em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.2514em;vertical-align:-0.93em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.2028em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9072em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">2</span></span></span><span style="top:-2.8672em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1328em;"><span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord mathnormal">n</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.93em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span><p>由 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo>=</mo><mi>n</mi><mi>k</mi><mi>T</mi></mrow><annotation encoding="application/x-tex">p=nkT</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">nk</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span> 得：</p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mover accent="true"><mi>λ</mi><mo>ˉ</mo></mover><mo>=</mo><mfrac><mrow><mi>k</mi><mi>T</mi></mrow><mrow><msqrt><mn>2</mn></msqrt><mi>π</mi><msup><mi>d</mi><mn>2</mn></msup><mi>p</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\bar{\lambda}=\frac{kT}{\sqrt{2}\pi d^2p}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8312em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8312em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">λ</span></span><span style="top:-3.2634em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;"><span class="mord">ˉ</span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.3631em;vertical-align:-0.9917em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.2028em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9072em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">2</span></span></span><span style="top:-2.8672em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221l0 -0c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47zM834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1328em;"><span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord mathnormal">p</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9917em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span><h1 id="热力学基础">热力学基础</h1><h2 id="热力学第零定律-热力学第一定律">热力学第零定律 热力学第一定律</h2><ul class="lvl-0"><li class="lvl-2"><p>热力学第零定律：如果两个物体都与处于确定状态的第三个物体处于热平衡状态，那么这两个物体彼此处于热平衡状态</p></li><li class="lvl-2"><p>气体对外做功</p></li></ul><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>d</mtext><mi>A</mi><mo>=</mo><mi>p</mi><mtext>d</mtext><mi>V</mi></mrow><annotation encoding="application/x-tex">\text dA=p\text dV</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord text"><span class="mord">d</span></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mord text"><span class="mord">d</span></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span></span><p>其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> 是功，对外时取正，对内时取负</p><ul class="lvl-0"><li class="lvl-2"><p>内能：内能的改变量只取决于系统初末状态（温度，见上），而与过程无关</p></li><li class="lvl-2"><p>热力学第一定律：外界对系统传递热量，一部分使系统内能增加，另一部分用于系统对外做功</p></li></ul><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>Q</mi><mo>=</mo><msub><mi>E</mi><mn>2</mn></msub><mo>−</mo><msub><mi>E</mi><mn>1</mn></msub><mo>+</mo><mi>A</mi></mrow><annotation encoding="application/x-tex">Q=E_2-E_1+A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">Q</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span></span><p>其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">Q</span></span></span></span> 是热量，系统从外界吸热取正，放热给外界取负<br>其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span> 是内能，内能取决于温度（见上）其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> 是功（见上）</p><h2 id="等容过程">等容过程</h2><h1 id="机械振动和电磁振荡">机械振动和电磁振荡</h1><h1 id="机械波和电磁波">机械波和电磁波</h1><h1 id="光学">光学</h1><h1 id="早期量子论和量子力学基础">早期量子论和量子力学基础</h1>]]></content:encoded>
      
      
      <category domain="https://samuflore.top/categories/2025-2026-%E5%AD%B8%E5%B9%B4/">2025 - 2026 學年</category>
      
      <category domain="https://samuflore.top/categories/2025-2026-%E5%AD%B8%E5%B9%B4/%E5%9F%BA%E7%A4%8E%E7%89%A9%E7%90%86%E5%AD%B8/">基礎物理學</category>
      
      
      <category domain="https://samuflore.top/tags/Physics/">Physics</category>
      
      
      <comments>https://samuflore.top/posts/585cfa20/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>[CO]CO 理论概要(Updating)</title>
      <link>https://samuflore.top/posts/52a88c87/</link>
      <guid>https://samuflore.top/posts/52a88c87/</guid>
      <pubDate>Tue, 16 Dec 2025 12:50:27 GMT</pubDate>
      
      <description>&lt;h1 id=&quot;序&quot;&gt;序&lt;/h1&gt;
&lt;p&gt;这是计组理论复习概要。&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<h1 id="序">序</h1><p>这是计组理论复习概要。</p><span id="more"></span><h1 id="概述">概述</h1><h2 id="计算机基本组成与结构">计算机基本组成与结构</h2><h3 id="计算机基本组成">计算机基本组成</h3><ul class="lvl-0"><li class="lvl-2"><p>硬件</p><ul class="lvl-2"><li class="lvl-6">运算器</li><li class="lvl-6">存储器</li><li class="lvl-6">I/O</li><li class="lvl-6">控制器</li></ul></li><li class="lvl-2"><p>软件</p><ul class="lvl-2"><li class="lvl-6">系统软件（操作系统）</li><li class="lvl-6">应用程序</li></ul></li></ul><h3 id="计算机总线结构">计算机总线结构</h3><p><a href="#%E6%80%BB%E7%BA%BF"><ruby>总线<rt>Bus</rt></ruby></a>：符合一定标准的一组公用信息通道。</p><h2 id="计算机层次结构">计算机层次结构</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">高级语言 -&gt; 虚拟机 M3</span><br><span class="line">  |           |</span><br><span class="line">  |           |</span><br><span class="line">汇编语言 -&gt; 虚拟机 M2</span><br><span class="line">  |           |</span><br><span class="line">  |           |</span><br><span class="line">机器语言 -&gt; 实机 M1</span><br></pre></td></tr></table></figure><ul class="lvl-0"><li class="lvl-2"><p>指令集系统</p></li></ul><h2 id="计算机中数的表示">计算机中数的表示</h2><p>关于数制，参考<a href="https://samuflore.top/posts/908cc5fb/">这里</a>。</p><ul class="lvl-0"><li class="lvl-2"><p>无符号数</p></li><li class="lvl-2"><p>有符号数</p></li><li class="lvl-2"><p>浮点数</p><ul class="lvl-2"><li class="lvl-6">IEEE 754：<ruby>符号<rt>Sign</rt></ruby>，<ruby>阶码<rt>Exponent</rt></ruby>，<ruby>尾数<rt>Mantissa</rt></ruby>。</li></ul></li><li class="lvl-2"><p>布尔值</p><ul class="lvl-2"><li class="lvl-6"><ruby>真<rt>1</rt></ruby>，<ruby>假<rt>0</rt></ruby></li></ul></li><li class="lvl-2"><p>西文字符</p><ul class="lvl-2"><li class="lvl-6">ASCII</li></ul></li><li class="lvl-2"><p>汉字字符</p><ul class="lvl-2"><li class="lvl-6">GB2312</li><li class="lvl-6">CJK</li><li class="lvl-6">Unicode</li></ul></li></ul><h2 id="计算机基本工作原理">计算机基本工作原理</h2><ul class="lvl-0"><li class="lvl-2"><p>机器指令</p><ul class="lvl-2"><li class="lvl-6">操作码</li><li class="lvl-6">操作数地址</li></ul></li><li class="lvl-2"><p>程序</p><ul class="lvl-2"><li class="lvl-6"><ruby>程序计数器<rt>Programme Counter</rt></ruby></li></ul></li><li class="lvl-2"><p>冯·诺伊曼计算机的特点</p><ul class="lvl-2"><li class="lvl-6">由运算器，存储器，控制器和 I/O 组成</li><li class="lvl-6">指令和数据的储存没有区别，放在存储器中按地址访问</li><li class="lvl-6">指令由操作码和地址组成</li></ul></li><li class="lvl-2"><p>摩尔定律</p></li></ul><h1 id="组合逻辑电路">组合逻辑电路</h1><h2 id="逻辑代数">逻辑代数</h2><h3 id="基本概念">基本概念</h3><ul class="lvl-0"><li class="lvl-2"><p>逻辑代数 L = { K, ∨, ∧, ￢, 0, 1}，其中 K 为逻辑变量集。</p><ul class="lvl-2"><li class="lvl-6">与 <code>·</code></li><li class="lvl-6">或 <code>+</code></li><li class="lvl-6">非</li><li class="lvl-6">异或、同或等</li><li class="lvl-6">运算优先级：<code>() -&gt; ￢ -&gt; ∧ -&gt; ⊕ -&gt; ∨</code></li></ul></li><li class="lvl-2"><p>逻辑门符号表示</p></li><li class="lvl-2"><p>公理系统</p><ul class="lvl-2"><li class="lvl-6"><code>A != 0 -&gt; A = 1; A != 1 -&gt; A = 0;</code></li><li class="lvl-6"><code>0 · 0 = 0; 1 + 1 = 1;</code></li><li class="lvl-6"><code>1 · 1 = 1; 0 + 0 = 0;</code></li><li class="lvl-6"><code>0 · 1 = 0; 1 + 0 = 1; 1 · 0 = 0; 0 + 1 = 1</code></li><li class="lvl-6"><code>￢0 = 1; ￢1 = 0;</code></li></ul></li></ul><h3 id="定律、定理和规则">定律、定理和规则</h3><ul class="lvl-0"><li class="lvl-2"><p>基本定律</p><ul class="lvl-2"><li class="lvl-6">交换律</li><li class="lvl-6">结合律</li><li class="lvl-6">分配律</li><li class="lvl-6">0-1 律</li><li class="lvl-6">互补律</li></ul></li><li class="lvl-2"><p>基本定理</p><ul class="lvl-2"><li class="lvl-6">重叠律 <code>A + A = A; A · A = A;</code></li><li class="lvl-6">吸收律：两个乘积项中，若有一个乘积项的部分因子，恰好是另一个乘积项的全部，则这个乘积项是多余的</li><li class="lvl-6">还原律：负负得正</li><li class="lvl-6">德摩根律</li><li class="lvl-6">更多……</li></ul></li><li class="lvl-2"><p>规则</p><ul class="lvl-2"><li class="lvl-6">代入规则</li><li class="lvl-6">反演规则：<code>+ ·</code> 互换，<code>0 1</code> 互换，变量变为反变量，得到反函数</li><li class="lvl-6">对偶规则：<code>+ ·</code> 互换，<code>0 1</code> 互换，变量保持不变，得到对偶式</li></ul></li></ul><h3 id="逻辑函数">逻辑函数</h3><ul class="lvl-0"><li class="lvl-2"><p>与或式 <code>AB + CD</code></p></li><li class="lvl-2"><p>或与式 <code>(A + B)(C + D)</code></p></li><li class="lvl-2"><p>与或非式 <code>￢(AB + CD)</code></p></li><li class="lvl-2"><p>最小项表达式：最小项构成的与或式（积之和式）（标准与或式）</p><ul class="lvl-2"><li class="lvl-6">把输出为 1 的输入组合写成乘积项的形式，其中取值为 1 的输入用原变量表示，取值为 0 的输入用反变量表示，然后把这些乘积项加起来</li><li class="lvl-6">最小项：n 个变量构成的与式中，每个变量或其反变量有且仅有一次出现</li><li class="lvl-6">n 个变量有 2<sup>n</sup> 个最小项</li></ul></li><li class="lvl-2"><p>最大项表达式：最大项构成的或与式（和之积式）（标准或与式）</p><ul class="lvl-2"><li class="lvl-6">把使输出为 0 的输入组合写成和项的形式，其中取值为 0 的输入用原变量表示，取值为 1 的输入用反变量表示，然后把这些和项乘起来</li><li class="lvl-6">最大项：n 个变量构成的或式中，每个变量或其反变量有且仅有一次出现</li><li class="lvl-6">n 个变量有 2<sup>n</sup> 个最大项</li></ul></li><li class="lvl-2"><p>逻辑函数化简</p><ul class="lvl-2"><li class="lvl-6">最简与或表达式：乘积项最少，同时乘积项中的变量尽可能少</li><li class="lvl-6">最简或与表达式：和项最少，同时和项中的变量尽可能少<ul class="lvl-4"><li class="lvl-10">利用对偶规则化为与或表达式，得到最简与或表达式，利用对偶规则化为最简或与表达式</li></ul></li><li class="lvl-6">卡诺图</li></ul></li></ul><h2 id="逻辑门电路">逻辑门电路</h2><h3 id="晶体管和-MOS-管">晶体管和 MOS 管</h3><ul class="lvl-0"><li class="lvl-2"><p>P 型半导体：带正电的空穴导电</p></li><li class="lvl-2"><p>N 型半导体：带负电的自由电子导电</p></li><li class="lvl-2"><p>PN 结：P 型和 N 型制作在一起</p><ul class="lvl-2"><li class="lvl-6">正向偏置：正极接 P 区，负极接 N 区，PN 结导通</li><li class="lvl-6">反向偏置：正极接 N 区，负极接 P 区，PN 结截止</li></ul></li><li class="lvl-2"><p>晶体二极管</p><ul class="lvl-2"><li class="lvl-6">正向导通：外加电压大于开启电压</li><li class="lvl-6">反向截止：外加反向电压或电压小于开启电压</li><li class="lvl-6">击穿：反向电压大于阈值（0.7V），二极管被击穿，失去单向导电性</li></ul></li><li class="lvl-2"><p>晶体三极管</p><ul class="lvl-2"><li class="lvl-6">导通：U<sub>BC</sub> &gt; 0, U<sub>BE</sub> &gt; 0.7V</li><li class="lvl-6">截止：U<sub>BC</sub> &lt; 0, U<sub>BE</sub> &lt; 0.7V</li></ul></li><li class="lvl-2"><p>MOS 管</p><ul class="lvl-2"><li class="lvl-6">导通：V<sub>GS</sub> &gt; 开启电压</li><li class="lvl-6">截止：V<sub>GS</sub> = 0</li></ul></li></ul><h3 id="门电路">门电路</h3><ul class="lvl-0"><li class="lvl-2"><p>与或非门的实现方式</p></li><li class="lvl-2"><p>CMOS 和 TTL 的对比</p><ul class="lvl-2"><li class="lvl-6">CMOS 功耗相对低，抗干扰能力相对强，带载能力强</li><li class="lvl-6">TTL 功耗相对高，速度相对快，抗干扰能力相对弱</li></ul></li></ul><h2 id="基本组合逻辑部件设计">基本组合逻辑部件设计</h2><ul class="lvl-0"><li class="lvl-2"><p>半加器：两个 1 位二进制数相加求和，并向高位进位，不考虑低位进位</p></li><li class="lvl-2"><p>全加器：两个 1 位二进制数相加求和，并向高位进位，考虑低位进位</p></li><li class="lvl-2"><p>多位加法器</p><ul class="lvl-2"><li class="lvl-6">并行加法器——串行进位</li><li class="lvl-6">并行加法器——并行进位</li></ul></li><li class="lvl-2"><p>溢出判断</p></li><li class="lvl-2"><p>乘法器</p></li><li class="lvl-2"><p>数值比较器</p></li><li class="lvl-2"><p>ALU（运算逻辑单元电路）</p></li><li class="lvl-2"><p>编码器</p><ul class="lvl-2"><li class="lvl-6">2<sup>n</sup> 线 — n 线编码器（<a href="https://samuflore.top/posts/9707d4af/">独热编码</a>）</li><li class="lvl-6">优先编码器（输出优先级最高的输入信号对应编号的反码）</li></ul></li><li class="lvl-2"><p>译码器</p><ul class="lvl-2"><li class="lvl-6">n 线 — 2<sup>n</sup> 线译码器</li><li class="lvl-6">显示译码器（七段码等）</li></ul></li><li class="lvl-2"><p><ruby>多路选择器<rt>多路复用器，MUX</rt></ruby></p><ul class="lvl-2"><li class="lvl-6">8 选 1 MUX</li></ul></li><li class="lvl-2"><p>竞争与冒险</p><ul class="lvl-2"><li class="lvl-6">竞争：某个输入变量通过两条或两条以上的路径传输到输出端，由于每条路径的延迟不同，导致不同路径的数据到达输出端的时间又先后</li><li class="lvl-6">冒险：门电路由于输入端的竞争，在输出端出现<ruby>尖峰干扰信号<rt>毛刺</rt></ruby>的现象</li><li class="lvl-6">核心原因：门电路的延迟</li><li class="lvl-6">代数法判断：逻辑函数 F 可以简化为 <code>F = A + ~A</code> 或 <code>F = A · ~A</code></li><li class="lvl-6">卡诺图法</li><li class="lvl-6">消除竞争冒险</li></ul></li></ul><h1 id="时序逻辑电路">时序逻辑电路</h1><h2 id="锁存器和触发器">锁存器和触发器</h2><ul class="lvl-0"><li class="lvl-2"><p><ruby>触发器<rt>Flip-Flop, FF</rt></ruby>是实现电路记忆功能的基本单元电路</p><ul class="lvl-2"><li class="lvl-6">两个互非的输出 Q 和 ~Q，Q 称为状态变量</li><li class="lvl-6"><code>Q = 0</code> 称为 0 态，<code>Q = 1</code> 称为 1 态</li><li class="lvl-6">Q<sup>n</sup> 称为原态，Q<sup>n+1</sup> 称为次态</li></ul></li><li class="lvl-2"><p><ruby>R<rt>Reset</rt></ruby><ruby>S<rt>Set</rt></ruby> 锁存器</p><ul class="lvl-2"><li class="lvl-6">与非门 RS 锁存器</li><li class="lvl-6">或非门 RS 锁存器</li><li class="lvl-6">输入：~R，~S</li><li class="lvl-6">保持：<code>~R = 1</code>，<code>~S = 1</code></li><li class="lvl-6">置 0：<code>~R = 0</code>， <code>~S = 1</code> （低电平有效）</li><li class="lvl-6">置 1：<code>~R = 1</code>，<code>~S = 0</code> （低电平有效）</li><li class="lvl-6">非法：<code>~R = ~S = 0</code> （产生竞争）</li><li class="lvl-6">约束条件：<code>~R + ~S = 1</code></li><li class="lvl-6">特性方程：反映次态、原态和输入之间关系的函数表达式：</li></ul>  <span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>Q</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msup><mo>=</mo><msub><mi>S</mi><mi>D</mi></msub><msub><mover accent="true"><mi>R</mi><mo>ˉ</mo></mover><mi>D</mi></msub><mo>+</mo><msub><mover accent="true"><mi>S</mi><mo>ˉ</mo></mover><mi>D</mi></msub><msub><mover accent="true"><mi>R</mi><mo>ˉ</mo></mover><mi>D</mi></msub><msup><mi>Q</mi><mi>n</mi></msup><mspace linebreak="newline"></mspace><mo>=</mo><msub><mi>S</mi><mi>D</mi></msub><mo>+</mo><msub><mover accent="true"><mi>R</mi><mo>ˉ</mo></mover><mi>D</mi></msub><msup><mi>Q</mi><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">    Q^{n+1}=S_D\bar{R}_D+\bar{S}_D\bar{R}_DQ^{n}\\    = S_D+\bar{R}_DQ^n    </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0585em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9701em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8201em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span><span style="top:-3.2523em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1667em;"><span class="mord">ˉ</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0145em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8201em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span><span style="top:-3.2523em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1667em;"><span class="mord">ˉ</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8201em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span><span style="top:-3.2523em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1667em;"><span class="mord">ˉ</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0145em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8201em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span><span style="top:-3.2523em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1667em;"><span class="mord">ˉ</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span><ul class="lvl-2"><li class="lvl-6">状态转移图</li><li class="lvl-6">时序图</li></ul></li><li class="lvl-2"><p>钟控 RS 锁存器</p><ul class="lvl-2"><li class="lvl-6">加入<ruby>时钟信号<rt>CP</rt></ruby>，高电位（或低电位）时改变锁存器状态，因此为电位触发方式的锁存器</li><li class="lvl-6">亦称同步锁存器</li><li class="lvl-6"><code>CP = 0</code> 时，~S 和 ~R 恒为 1，保持；<code>clk = 1</code> 时，由 ~S 和 ~R 决定</li><li class="lvl-6">仍有约束条件</li></ul></li><li class="lvl-3"><p>钟控 D 锁存器</p><ul class="lvl-2"><li class="lvl-6">将 R，S 两个输入端换为一个输入端 D，<code>S = D</code>，<code>R = ~D</code>，保证二者恒为互非</li><li class="lvl-6">特性方程：</li></ul> <span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>Q</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msup><mo>=</mo><mi>D</mi><mspace width="1em"><mo stretchy="false">(</mo><mi>C</mi><mi>P</mi><mo>=</mo><mn>1</mn><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><msup><mi>Q</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msup><mo>=</mo><msup><mi>Q</mi><mi>n</mi></msup><mspace width="1em"><mo stretchy="false">(</mo><mi>C</mi><mi>P</mi><mo>=</mo><mn>0</mn><mo stretchy="false">)</mo></mspace></mspace></mrow><annotation encoding="application/x-tex">    Q^{n+1} = D\quad(CP=1) \\    Q^{n+1} = Q^n\quad(CP=0)    </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0585em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:1em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">CP</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1.0585em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:1em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">CP</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mclose">)</span></span></span></span></span></li><li class="lvl-2"><p>D 触发器</p><ul class="lvl-2"><li class="lvl-6">由两个反相的 D 锁存器构成</li><li class="lvl-6">锁存器 L1 称为<ruby>主<rt>Master</rt></ruby>锁存器，L2 称为<ruby>从<rt>Slave</rt></ruby>锁存器</li><li class="lvl-6">触发器是时钟有效沿触发，锁存器是电位触发</li><li class="lvl-6">增加使能端</li><li class="lvl-6">在时钟信号上一般不要设置逻辑，否则可能因延迟导致时序错误</li><li class="lvl-6">增加复位端<ul class="lvl-4"><li class="lvl-10">同步复位：复位信号有效和时钟沿有效才复位</li><li class="lvl-10">异步复位：复位信号有效则复位</li></ul></li></ul></li><li class="lvl-2"><p>JK 触发器</p><ul class="lvl-2"><li class="lvl-6">在钟控 RS 锁存器基础上，把 <code>~R = 1; ~S = 1</code> 的情况变为翻转功能</li><li class="lvl-6"><code>J = ~Q</code>, <code>K = R</code></li><li class="lvl-6">翻转：Q<sup>n+1</sup> = ~Q<sup>n</sup></li><li class="lvl-6">特性方程</li></ul>  <span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>Q</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msup><mo>=</mo><mi>J</mi><msup><mover accent="true"><mi>Q</mi><mo>ˉ</mo></mover><mi>n</mi></msup><mo>+</mo><mover accent="true"><mi>K</mi><mo>ˉ</mo></mover><msup><mi>Q</mi><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">    Q^{n+1}=J\bar{Q}^n+\bar{K}Q^n    </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0585em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0145em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8201em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">Q</span></span><span style="top:-3.2523em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1667em;"><span class="mord">ˉ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0145em;vertical-align:-0.1944em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8201em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span><span style="top:-3.2523em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1944em;"><span class="mord">ˉ</span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></span><ul class="lvl-2"><li class="lvl-6">状态转换图</li></ul></li></ul><h2 id="有限状态机">有限状态机</h2><p>关于有限状态机，参考<a href="https://samuflore.top/posts/11653afb/">这里</a>。</p><ul class="lvl-0"><li class="lvl-2"><p>同步时序电路</p><ul class="lvl-2"><li class="lvl-6">每个电路元件都是组合逻辑或寄存器，且至少有一个寄存器</li><li class="lvl-6">每一个环路至少有一个寄存器</li><li class="lvl-6">所有寄存器接受同一个时钟信号</li><li class="lvl-6">可以描绘成有限状态机</li></ul></li><li class="lvl-2"><p>有限状态机</p><ul class="lvl-2"><li class="lvl-6">次态逻辑</li><li class="lvl-6">状态存储</li><li class="lvl-6">输出逻辑</li><li class="lvl-6">Moore 机<ul class="lvl-4"><li class="lvl-10">输出信号与当前状态有关</li></ul></li><li class="lvl-6">Mealy 机<ul class="lvl-4"><li class="lvl-10">输出信号与当前状态及当前输入信号有关</li></ul></li><li class="lvl-6">必须有时钟信号和复位信号</li><li class="lvl-6">状态编码方式<ul class="lvl-4"><li class="lvl-10">二进制编码</li><li class="lvl-10">格雷编码</li><li class="lvl-10"><a href="https://samuflore.top/posts/9707d4af/">独热编码</a></li></ul></li></ul></li></ul><h2 id="时序逻辑电路设计分析">时序逻辑电路设计分析</h2><ul class="lvl-0"><li class="lvl-2"><p>寄存器</p><ul class="lvl-2"><li class="lvl-6">触发器和控制门电路组成<ul class="lvl-4"><li class="lvl-10">一个触发器存储一位</li><li class="lvl-10">控制门电路保证各触发器同时接收数据</li></ul></li><li class="lvl-6">写/读/<ruby>复位<rt>清零</rt></ruby></li><li class="lvl-6">边沿或电位触发</li><li class="lvl-6">数据寄存器<ul class="lvl-4"><li class="lvl-10">边沿触发器组成</li></ul></li><li class="lvl-6">数据锁存器<ul class="lvl-4"><li class="lvl-10">电位触发器组成</li></ul></li><li class="lvl-6">移位寄存器<ul class="lvl-4"><li class="lvl-10">具有移位功能的寄存器。每来一个时钟脉冲，寄存器中数据就依次向左或向右移一位</li></ul></li></ul></li><li class="lvl-2"><p>计数器</p><ul class="lvl-2"><li class="lvl-6">统计输入的脉冲个数</li><li class="lvl-6">同步计数<ul class="lvl-4"><li class="lvl-10">各触发器同时翻转，工作频率高</li></ul></li><li class="lvl-6">异步计数<ul class="lvl-4"><li class="lvl-10">脉冲信号只作用于最低位触发器，高位触发器待低位触发器翻转后才能翻转，工作频率低</li></ul></li><li class="lvl-6">进制</li><li class="lvl-6">加法/减法</li></ul></li><li class="lvl-2"><p>时序电路的时序</p><ul class="lvl-2"><li class="lvl-6"><ruby>建立<rt>Setup</rt></ruby>时间：触发时钟沿之前，输入必须稳定的时间</li><li class="lvl-6"><ruby>保持<rt>Hold</rt></ruby>时间：触发时钟沿之后，输入必须稳定的时间</li><li class="lvl-6">孔径时间：T<sub>Setup</sub> + T<sub>Hold</sub></li><li class="lvl-6">Clock-to-Q 时间：从触发时钟边沿开始到输入稳定的时间</li><li class="lvl-6">时钟周期 &gt;= T<sub>CTQ</sub> + <ruby>T<sub>CDL</sub><rt>最长路径延迟</rt></ruby> + T<sub>Setup</sub> + 时钟偏移（一般忽略）</li><li class="lvl-6">T<sub>CTQ</sub> + <ruby>T<sub>CDS</sub><rt>最短路径延迟</rt></ruby> &gt;= T<sub>Hold</sub>，否则无法锁存输入，因为在上一个输入的保持时间内，输入发生了变化</li></ul></li></ul><h1 id="主存储器">主存储器</h1><h2 id="概述-2">概述</h2><h3 id="分类">分类</h3><ul class="lvl-0"><li class="lvl-2"><p>按介质</p><ul class="lvl-2"><li class="lvl-6">半导体（易失）</li><li class="lvl-6">磁介质（非易失）</li><li class="lvl-6">光盘（非易失）</li></ul></li><li class="lvl-2"><p>按访问方式</p><ul class="lvl-2"><li class="lvl-6"><ruby>随机访问存储器<rt>RAM</rt></ruby><ul class="lvl-4"><li class="lvl-10"><ruby>静态随机访问存储<rt>Static RAM</rt></ruby>：用作 Cache</li><li class="lvl-10"><ruby>动态随机访问存储<rt>Dynamic RAM</rt></ruby>：用作主存</li></ul></li><li class="lvl-6"><ruby>只读存储器<rt>ROM</rt></ruby></li><li class="lvl-6"><ruby>顺序访问存储器<rt>Tape</rt></ruby></li><li class="lvl-6"><ruby>直接访问存储器<rt>Disk</rt></ruby></li></ul></li><li class="lvl-2"><p>按功能</p><ul class="lvl-2"><li class="lvl-6"><ruby>高速缓冲存储器<rt>Cache</rt></ruby></li><li class="lvl-6">主存储器</li><li class="lvl-6">辅助存储器</li><li class="lvl-6">控制存储器</li></ul></li></ul><h3 id="性能指标">性能指标</h3><ul class="lvl-0"><li class="lvl-2"><p>访问时间 T<sub>A</sub></p><ul class="lvl-2"><li class="lvl-6">RAM：访问时间指读或写操作所用时间，即从给定地址到存储器完成读或写操作所需时间</li><li class="lvl-6">其它：指将读写机构定位到目标位置所需的时间</li></ul></li><li class="lvl-2"><p>存储周期 T<sub>C</sub></p><ul class="lvl-2"><li class="lvl-6">仅对 RAM 而言：指两次访问存储单元间的最小时间间隔</li><li class="lvl-6">T<sub>C</sub> &gt; T<sub>A</sub></li></ul></li><li class="lvl-2"><p>带宽/数据传输率</p></li><li class="lvl-2"><p>存储器的性能特征：成本低的容量大，速度慢；成本高的容量小，速度快</p></li></ul><h2 id="存储单元电路">存储单元电路</h2><ul class="lvl-0"><li class="lvl-2"><p>基本要求</p><ul class="lvl-2"><li class="lvl-6">具有两种稳定状态，表示 0 和 1</li><li class="lvl-6">可以实现状态写入</li><li class="lvl-6">可以实现状态感知</li></ul></li><li class="lvl-2"><p>SRAM 存储单元电路</p></li><li class="lvl-2"><p>DRAM 存储单元电路</p></li><li class="lvl-2"><p>ROM 存储单元电路</p></li></ul><h3 id="非易失存储器">非易失存储器</h3><ul class="lvl-0"><li class="lvl-2"><p><ruby>相变存储器<rt>PCM</rt></ruby></p><ul class="lvl-2"><li class="lvl-6">非易失</li><li class="lvl-6">空闲时功率低</li><li class="lvl-6">延迟高</li><li class="lvl-6">活跃时功率高</li><li class="lvl-6">寿命短</li></ul></li><li class="lvl-2"><p><ruby>自旋转矩磁随机存取存储器<rt>STT-MRAM</rt></ruby></p></li><li class="lvl-2"><p><ruby>忆阻器<rt>Memristor</rt></ruby></p></li></ul><h2 id="存储器芯片结构">存储器芯片结构</h2><ul class="lvl-0"><li class="lvl-2"><p>基本描述</p><ul class="lvl-2"><li class="lvl-6">字单元数 * 每个字单元的位数例如 1K * 2：1024 个字单元，每个字单元 2 位。</li><li class="lvl-6">存储位元数：字单元数 * 每个字单元的位数，如 1024 * 2 = 2048</li><li class="lvl-6">地址线数：按字单元寻址，1024（2<sup>10</sup>）个字单元，需要 10 条地址线</li><li class="lvl-6">数据线数：一次访问一个字单元，每个字单元 2 位，需要 2 条数据线</li><li class="lvl-6">2<sup>n</sup> * m 个存储位元，需要 n 条地址线和 m 条数据线</li></ul></li><li class="lvl-2"><p>二维地址结构</p><ul class="lvl-2"><li class="lvl-6">SRAM 的情况：例如 4096 * 4：2<sup>14</sup> 个存储位元，划为 2<sup>7</sup> * 2<sup>7</sup> 的存储矩阵。一行 2<sup>7</sup> = 128 个存储位元，每 4 个为 1 字单元，共 32（2<sup>5</sup>） 个字单元。<ul class="lvl-4"><li class="lvl-10">行地址线数：2<sup>7</sup> 个存储位元，使用 7 条地址线（X 译码）</li><li class="lvl-10">列地址线数：2<sup>5</sup> 个字单元，使用 5 条地址线（Y 译码）</li><li class="lvl-10">数据线数：4</li></ul></li><li class="lvl-6">DRAM 的情况：例如 4096 * 4：2<sup>12</sup> 个字单元，划为 2<sup>6</sup> * 2<sup>6</sup> 的存储矩阵。<ul class="lvl-4"><li class="lvl-10">行地址线数 = 列地址线数 = 6</li><li class="lvl-10">数据线数：4</li></ul></li></ul></li></ul><h2 id="存储器扩展">存储器扩展</h2><ul class="lvl-0"><li class="lvl-2"><p>位扩展：多个同样的存储器芯片的数据位空间拼在一起<br>例如 2 个 1024 * 4 的 SRAM 芯片构造 1024 * 8 的存储器</p></li><li class="lvl-2"><p>字扩展：多个同样的存储器芯片的字空间拼在一起例如 4 个 1024 * 8 的 SRAM 芯片构造 4096 * 8 的存储器。地址线需要增加 2 条以选择是哪一片 SRAM 芯片中的数据</p></li><li class="lvl-2"><p>混合扩展：综合运用位扩展和字扩展<br>例如 8 个 4096 * 4 的 SRAM 芯片构造 16384 * 8 的存储器（两个一组进行位扩展，四组进行字扩展）</p></li><li class="lvl-2"><p>异种扩展：多个不同的存储器芯片进行扩展</p></li><li class="lvl-2"><p>同一字空间的存储芯片选择信号连在一起</p></li><li class="lvl-2"><p>同一位空间的数据线连在一起</p></li></ul><h1 id="指令系统与-MIPS-汇编">指令系统与 MIPS 汇编</h1><h2 id="概述-3">概述</h2><ul class="lvl-0"><li class="lvl-2"><p>机器指令的要素</p><ul class="lvl-2"><li class="lvl-6">操作码</li><li class="lvl-6">源操作数地址</li><li class="lvl-6">目的操作数地址</li><li class="lvl-6">下条指令的地址（少数指令用）</li></ul></li><li class="lvl-2"><p>指令类型</p><ul class="lvl-2"><li class="lvl-6">数据传输指令：寄存器与存储器之间、寄存器之间</li><li class="lvl-6">算数/逻辑运算指令</li><li class="lvl-6">程序控制指令：控制程序执行顺序，条件转移或跳转，返回等</li><li class="lvl-6">浮点数运算指令</li></ul></li><li class="lvl-2"><p>操作数</p><ul class="lvl-2"><li class="lvl-6">类型：数值，布尔值，地址</li><li class="lvl-6">位置：存储器，寄存器，输入输出端口</li></ul></li><li class="lvl-2"><p>存储方式</p><ul class="lvl-2"><li class="lvl-6"><ruby>大端<rt>Big-Endian</rt></ruby>存储：最高有效字节存储在地址最小位置</li><li class="lvl-6"><ruby>小端<rt>Little-Endian</rt></ruby>存储：最低有效字节存储在地址最小位置</li></ul>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">例如存储 0x12345678</span><br><span class="line">// 大端存储 //</span><br><span class="line">Addr    Value</span><br><span class="line">0x00    0x12</span><br><span class="line">0x01    0x34</span><br><span class="line">0x02    0x56</span><br><span class="line">0x03    0x78</span><br><span class="line"></span><br><span class="line">// 小端存储 //</span><br><span class="line">Addr    Value</span><br><span class="line">0x00    0x78</span><br><span class="line">0x01    0x56</span><br><span class="line">0x02    0x34</span><br><span class="line">0x03    0x12</span><br></pre></td></tr></table></figure></li><li class="lvl-2"><p>指令集系统架构种类</p><ul class="lvl-2"><li class="lvl-6">Register-Memory 式（如 X86）：多种指令可以访问内存；存在寄存器操作数和内存操作数直接运行的指令</li><li class="lvl-6">Load-Store 式（如 MIPS）：只有 Load 和 Store 类型可以访问内存；运算指令操作数全为寄存器操作数</li></ul></li><li class="lvl-2"><p>操作数地址的数目</p><ul class="lvl-2"><li class="lvl-6">三地址：<code>Opcode DesAddr Sur1Addr Sur2Addr</code></li><li class="lvl-6">二地址：<code>Opcode DesAddr SurAddr</code></li><li class="lvl-6">单地址：<code>Opcode Addr</code></li><li class="lvl-6">无地址：<code>Opcode</code></li></ul></li><li class="lvl-2"><p>操作码结构</p><ul class="lvl-2"><li class="lvl-6">定长：如 MIPS</li><li class="lvl-6">变长：如 X86</li></ul></li><li class="lvl-2"><p>形式地址：指令中给出的地址编码</p></li><li class="lvl-2"><p>有效地址：根据形式地址和寻址方式计算出来的操作数在内存单元中的地址</p></li><li class="lvl-2"><p>寻址方式：根据形式地址计算到操作数的有效地址的方式</p><ul class="lvl-2"><li class="lvl-6">立即寻址：操作数直接在指令代码中给出</li><li class="lvl-6">寄存器直接寻址</li><li class="lvl-6">寄存器间接寻址</li><li class="lvl-6">相对寻址</li><li class="lvl-6">基址寻址</li><li class="lvl-6">更多……</li></ul></li><li class="lvl-2"><p>确定寻址方式</p></li></ul><h2 id="典型指令系统">典型指令系统</h2><ul class="lvl-0"><li class="lvl-2"><p>8086/8088 指令系统</p></li><li class="lvl-2"><p>MIPS 指令系统</p><ul class="lvl-2"><li class="lvl-6">32 个 32 位<ruby>通用寄存器<rt>GPRs</rt></ruby></li><li class="lvl-6">32 个 32 位<ruby>浮点数寄存器<rt>FGPRs</rt></ruby></li><li class="lvl-6">HI，LO，PC</li><li class="lvl-6">指令类型<ul class="lvl-4"><li class="lvl-10"><ruby>R<rt>Register</rt></ruby> 型：两个寄存器操作数计算，结果送第三个寄存器</li><li class="lvl-10"><ruby>I<rt>Immediate</rt></ruby> 型：使用一个 16 位立即数做运算</li><li class="lvl-10"><ruby>J<rt>Jump</rt></ruby> 型：跳转 26 位立即数表示的地址</li></ul></li><li class="lvl-6">最多三地址</li><li class="lvl-6">对于 Load/Store 类型，寻址均为 <code>Base + Offset</code></li><li class="lvl-6">没有间接寻址</li><li class="lvl-6">更多……</li></ul></li><li class="lvl-2"><p>R 型</p><ul class="lvl-2"><li class="lvl-6">Opcode (6)：操作码</li><li class="lvl-6">Rs (5)：第一寄存器源操作数</li><li class="lvl-6">Rt (5)：第二寄存器源操作数</li><li class="lvl-6">Rd (5)：目的寄存器操作数</li><li class="lvl-6">Shamt (5)：偏移量（SLL 等用）</li><li class="lvl-6">Func (6)：功能码</li></ul></li><li class="lvl-2"><p>I 型</p><ul class="lvl-2"><li class="lvl-6">Opcode (6)：操作码</li><li class="lvl-6">Rs (5)：第一寄存器源操作数</li><li class="lvl-6">Rt (5)：第二寄存器源操作数</li><li class="lvl-6">Imm16 (16)：16 位立即数</li></ul></li><li class="lvl-2"><p>J 型</p><ul class="lvl-2"><li class="lvl-6">Opcode (6)：操作码</li><li class="lvl-6">Imm26 (26)：26 位立即数</li></ul></li><li class="lvl-2"><p><ruby>Complex Instruction Set Computer<rt>增强指令功能，CISC</rt></ruby> 和 <ruby>Reduced Instruction Set Computer<rt>简化指令功能，RISC</rt></ruby></p><ul class="lvl-2"><li class="lvl-6">CISC：X86 等</li><li class="lvl-6">RISC：MIPS 等</li></ul></li></ul><h1 id="MIPS-处理器设计">MIPS 处理器设计</h1><h2 id="概述-4">概述</h2><ul class="lvl-0"><li class="lvl-2"><p>CPU 功能：控制指令执行</p></li><li class="lvl-2"><p>四种基本操作</p><ul class="lvl-2"><li class="lvl-6">取数</li><li class="lvl-6">存数</li><li class="lvl-6">传送</li><li class="lvl-6">运算</li></ul></li><li class="lvl-2"><p>指令周期：CPU 从指令存储器中读出并执行指令全部功能的全部时间</p><ul class="lvl-2"><li class="lvl-6">取指周期：完成取指令和分析指令的时间</li><li class="lvl-6">取数周期：从数据存储器中取出操作数所需时间，包括计算操作数有效地址</li><li class="lvl-6">执行周期：完成指令规定动作的时间</li></ul></li><li class="lvl-2"><p>功能部件</p><ul class="lvl-2"><li class="lvl-6">取指相关</li><li class="lvl-6">执行相关</li></ul></li><li class="lvl-2"><p>CPU 内部结构</p><ul class="lvl-2"><li class="lvl-6"><ruby>数据通路<rt>Datapath</rt></ruby><ul class="lvl-4"><li class="lvl-10">运算，ALU 等</li><li class="lvl-10">寄存器，GRF 等</li></ul></li><li class="lvl-6"><ruby>控制器<rt>CU</rt></ruby><ul class="lvl-4"><li class="lvl-10"><ruby>指令译码器<rt>Instruction Decoder, ID</rt></ruby></li><li class="lvl-10"><ruby>指令寄存器<rt>Instruction Register, IR</rt></ruby></li><li class="lvl-10">程序计数器</li></ul></li><li class="lvl-6">总线</li></ul></li><li class="lvl-2"><p><ruby>寄存器传送语言<rt>Register Transfer Language, RTL</rt></ruby></p></li><li class="lvl-2"><p><ruby>字对齐<rt>Alignment</rt></ruby>：对象的起始地址一定要是字长的整数倍</p></li></ul><h2 id="MIPS-模型机">MIPS 模型机</h2><ul class="lvl-0"><li class="lvl-2"><p>指令集</p></li><li class="lvl-2"><p>数据通路</p><ul class="lvl-2"><li class="lvl-6"><ruby>加法器<rt>Adder</rt></ruby>：处理 PC 值的增长</li><li class="lvl-6"><ruby>算数逻辑运算单元<rt>ALU</rt></ruby></li><li class="lvl-6">多路选择器</li><li class="lvl-6"><ruby>符号扩展器<rt>SignExt</rt></ruby></li><li class="lvl-6"><ruby>寄存器堆<rt>GRF</rt></ruby></li><li class="lvl-6"><ruby>数据存储器<rt>DM</rt></ruby></li><li class="lvl-6"><ruby>指令存储器<rt>IM</rt></ruby></li></ul></li></ul><h2 id="MIPS-单周期处理器">MIPS 单周期处理器</h2><ul class="lvl-0"><li class="lvl-2"><p>哈佛体系：用 IM 和 DM 区分指令和数据的保存</p></li><li class="lvl-2"><p>设计数据通路</p></li><li class="lvl-2"><p>控制器设计</p><ul class="lvl-2"><li class="lvl-6">PC 改变方式选择</li><li class="lvl-6">ALU 控制</li><li class="lvl-6">GRF 写入目标选择</li><li class="lvl-6">GRF 写使能</li><li class="lvl-6">ALU 输入选择</li><li class="lvl-6">更多……</li></ul></li><li class="lvl-2"><p>单周期</p><ul class="lvl-2"><li class="lvl-6">每条指令执行需要一个时钟周期（CPI = 1）</li><li class="lvl-6">所有状态的更新在指令执行结束的时刻完成</li><li class="lvl-6">最慢指令决定时钟周期的长度</li><li class="lvl-6">数据信号操作的同时产生控制信号</li><li class="lvl-6">指令处理周期的所有阶段都在<ins>一个机器时钟周期</ins>中完成</li></ul></li><li class="lvl-2"><p>多周期</p><ul class="lvl-2"><li class="lvl-6">指令处理分布到多个周期中（CPI 浮动）</li><li class="lvl-6">指令执行过程中可以更新状态</li><li class="lvl-6">整体状态的更新在指令执行结束后更新</li><li class="lvl-6">最慢“阶段”决定时钟周期长度</li><li class="lvl-6">下一周期所需的控制信号可以在上一周期产生</li><li class="lvl-6">指令处理周期的所有阶段可以在<ins>多个机器时钟周期</ins>中完成</li></ul></li></ul><h2 id="MIPS-多周期处理器">MIPS 多周期处理器</h2><ul class="lvl-0"><li class="lvl-2"><p>普林斯顿体系：指令和数据共用一个存储器</p></li><li class="lvl-2"><p>设计数据通路</p></li><li class="lvl-2"><p>控制器设计</p></li></ul><h2 id="MIPS-流水线处理器">MIPS 流水线处理器</h2><ul class="lvl-0"><li class="lvl-2"><p>响应时间：从提交作业到完成作业花费的时间</p></li><li class="lvl-2"><p>吞吐量：一定时间间隔内完成的作业数</p></li><li class="lvl-2"><p>流水线不改善单个任务的处理时间，但改善了整体的吞吐率</p></li><li class="lvl-2"><p>CPU 执行时间</p><ul class="lvl-2"><li class="lvl-6">CPU 执行时间 = 程序的 CPU 时钟周期数 * 时钟周期的长度 = 程序的 CPU 时钟周期数 / 时钟频率</li><li class="lvl-6">程序的 CPU 时钟周期数 = 程序的指令数 * 每条指令的平均时钟周期数</li></ul></li><li class="lvl-2"><p>五级流水线</p><ul class="lvl-2"><li class="lvl-6"><ruby>取指令<rt>F 级</rt></ruby></li><li class="lvl-6"><ruby>译码<rt>D 级</rt></ruby></li><li class="lvl-6"><ruby>执行运算<rt>E 级</rt></ruby></li><li class="lvl-6"><ruby>访存<rt>M 级</rt></ruby></li><li class="lvl-6"><ruby>写回<rt>W 级</rt></ruby></li></ul></li><li class="lvl-2"><p>增加流水级寄存器</p></li><li class="lvl-2"><p>流水阶段</p><ol><li class="lvl-7">前级流水级寄存器的输出</li><li class="lvl-7">组合逻辑计算</li><li class="lvl-7">写入后级流水级寄存器</li></ol></li><li class="lvl-2"><p>所有指令都要经过五级流水线，故有些指令在某些阶段会处于空闲阶段</p></li><li class="lvl-2"><p>流水线性能</p><ul class="lvl-2"><li class="lvl-6"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mrow><mi>C</mi><mo separator="true">,</mo><mi>p</mi><mi>i</mi><mi>p</mi><mi>e</mi><mi>l</mi><mi>i</mi><mi>n</mi><mi>e</mi><mi>d</mi></mrow></msub><mo>=</mo><mi>max</mi><mo>⁡</mo><mo stretchy="false">(</mo><msub><mi>T</mi><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>g</mi><mi>e</mi><mi>F</mi></mrow></msub><mo separator="true">,</mo><msub><mi>T</mi><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>g</mi><mi>e</mi><mi>D</mi></mrow></msub><mo separator="true">,</mo><msub><mi>T</mi><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>g</mi><mi>e</mi><mi>E</mi></mrow></msub><mo separator="true">,</mo><msub><mi>T</mi><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>g</mi><mi>e</mi><mi>M</mi><mo separator="true">,</mo><msub><mi>T</mi><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>g</mi><mi>e</mi><mi>W</mi></mrow></msub></mrow></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T_{C, pipelined} = \max(T_{stageF}, T_{stageD}, T_{stageE}, T_{stageM, T_{stageW}})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">in</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">d</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0975em;vertical-align:-0.3475em;"></span><span class="mop">max</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">F</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">eD</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.05764em;">E</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567em;margin-left:-0.1389em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2822em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3475em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></li><li class="lvl-6"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mrow><mi>C</mi><mo separator="true">,</mo><mi>p</mi><mi>i</mi><mi>p</mi><mi>e</mi><mi>l</mi><mi>i</mi><mi>n</mi><mi>e</mi><mi>d</mi></mrow></msub><mo>≥</mo><mfrac><msub><mi>T</mi><mrow><mi>C</mi><mo separator="true">,</mo><mi>s</mi><mi>i</mi><mi>n</mi><mi>g</mi><mi>l</mi><mi>e</mi><mo>−</mo><mi>c</mi><mi>y</mi><mi>c</mi><mi>l</mi><mi>e</mi></mrow></msub><mrow><mi>n</mi><mi>u</mi><mi>m</mi><mi>b</mi><mi>e</mi><mi>r</mi><mtext>  </mtext><mi>o</mi><mi>f</mi><mtext>  </mtext><mi>s</mi><mi>t</mi><mi>a</mi><mi>g</mi><mi>e</mi><mi>s</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">T_{C, pipelined} \ge \frac{T_{C, single-cycle}}{number\;of\;stages}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">in</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">d</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.4725em;vertical-align:-0.4811em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9914em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">mb</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">er</span><span class="mspace mtight" style="margin-right:0.3253em;"></span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight" style="margin-right:0.10764em;">f</span><span class="mspace mtight" style="margin-right:0.3253em;"></span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight">es</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.5131em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:-0.1389em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">in</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">e</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight">cyc</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2901em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4811em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> （若各阶段用时相等，则取等号）</li></ul></li><li class="lvl-2"><p>流水线冒险</p><ul class="lvl-2"><li class="lvl-6">结构冒险：处于两个流水段的指令要用同一个资源例如同一个时钟周期，一条指令写 GRF，一条指令读 GRF</li><li class="lvl-6">数据冒险<ul class="lvl-4"><li class="lvl-10"><ruby>写后读<rt>Read After Write, RAW</rt></ruby></li><li class="lvl-10"><ruby>读后写<rt>Write After Read, WAR</rt></ruby></li><li class="lvl-10"><ruby>写后写<rt>Write After Write, WAW</rt></ruby>：检测并旁路/转发数据给相关指令，若不行，则阻塞流水线</li><li class="lvl-10">阻塞等价于插入一条 <code>nop</code>：冻结 FD 寄存器，清空 DE 寄存器，保持 PC 值不变</li><li class="lvl-10">尽量避免阻塞：对代码重排序，避免下一条指令使用 load 类指令的结果</li></ul></li><li class="lvl-6">控制冒险<ul class="lvl-4"><li class="lvl-10">分支指令（<code>beq</code> 等）的判断结果会影响接下来的执行的指令流：提前分支判断，延迟槽等</li></ul></li></ul></li><li class="lvl-2"><p>流水线设计的一般方法</p><ul class="lvl-2"><li class="lvl-6">以单周期数据通路和控制信号为基础</li><li class="lvl-6">考虑转发</li><li class="lvl-6">考虑冒险</li><li class="lvl-6">考虑分支</li></ul></li><li class="lvl-2"><p>流水线设计的工程化方法</p><ul class="lvl-2"><li class="lvl-6">集中式译码与分布式译码<ul class="lvl-4"><li class="lvl-10">集中式：<ruby>控制器<rt>Controller</rt></ruby>在 D 级，产生全部译码信号，并且全部控制信号都流水</li><li class="lvl-10">分布式：控制器分布在多个流水级，每级控制器只产生该级需要的控制信号，只流水指令（较优）</li></ul></li><li class="lvl-6">指令集规划和实现</li><li class="lvl-6">功能部件的实现<ul class="lvl-4"><li class="lvl-10">PC</li><li class="lvl-10">NPC</li><li class="lvl-10">IM</li><li class="lvl-10">GRF</li><li class="lvl-10">EXT</li><li class="lvl-10">CMP</li><li class="lvl-10">ALU</li><li class="lvl-10">MDU</li><li class="lvl-10">DM</li><li class="lvl-10">更多……</li></ul></li><li class="lvl-6">流水级寄存器</li><li class="lvl-6">数据通路</li><li class="lvl-6">转发通路<ul class="lvl-4"><li class="lvl-10">T_use - T_new 模型</li></ul></li><li class="lvl-6">阻塞的条件判断</li><li class="lvl-6">转发的条件判断</li><li class="lvl-6">实现延迟槽<br><a id="中断异常"></a></li></ul></li><li class="lvl-2"><p>中断与异常的处理</p><ul class="lvl-2"><li class="lvl-6"><ruby>轮询<rt>Polling</rt></ruby>：处理器周期性查询控制寄存器，确认是否允许 I/O</li><li class="lvl-6">异常：CPU 内部产生（例如未定义的指令，算数溢出，系统调用等）<ul class="lvl-4"><li class="lvl-10"><ruby>自陷<rt>Trap，软件中断</rt></ruby>：编写程序时故意的陷入内核，如 <code>syscall</code></li><li class="lvl-10"><ruby>故障<rt>Fault，软件中断</rt></ruby>：执行程序时发生的意外，若异常处理代码可以处理，则返回现场；否则报错</li><li class="lvl-10"><ruby>终止<rt>Abort，硬件中断</rt></ruby>：指令执行中发生致命错误，只能终止程序</li></ul></li><li class="lvl-6">中断：来自外部 I/O 控制器，硬件中断<ul class="lvl-4"><li class="lvl-10">可屏蔽中断</li><li class="lvl-10">非屏蔽中断</li></ul></li><li class="lvl-6">CP0 协处理器<ul class="lvl-4"><li class="lvl-10">SR 寄存器</li><li class="lvl-10">保存受害 PC（<ruby>EPC<rt>Exception Program Counter</rt></ruby>）</li><li class="lvl-10">保存问题描述（Cause 寄存器）</li><li class="lvl-10">PRId：CPU 唯一标识</li></ul></li><li class="lvl-6">跳转<ruby>异常处理代码<rt>Exception Handler Code</rt></ruby>：如地址 <code>0x00004180</code></li><li class="lvl-6"><code>eret</code> 无条件跳转指令</li><li class="lvl-6">保持异常标志，一直流水到 M 级 CP0，早期流水级的异常覆盖晚期的，外部中断优先级最高</li><li class="lvl-6">通知操作系统</li><li class="lvl-6"><ruby>中断<rt>I/O 中断</rt></ruby>：异步的，可以发生在任何时候，不会阻止任何指令的运行</li><li class="lvl-6">恢复现场</li></ul></li></ul><h2 id="处理器性能分析">处理器性能分析</h2><ul class="lvl-0"><li class="lvl-2"><p>性能分析</p><ul class="lvl-2"><li class="lvl-6">按比例计算平均 <ruby>CPI<rt>Clock Cycles Per Instruction，指令平均执行周期数</rt></ruby>（CPI 等于 <code>指令所用时间 / 时钟周期</code>）</li><li class="lvl-6">程序执行时间：<code>所有指令的（CPI * 机器时钟周期长度）和</code>；等于 <code>指令数 * 平均 CPI * 机器时钟周期长度</code></li><li class="lvl-6"><ruby>MIPS<rt>Million Instructions Per Second，百万指令每秒</rt></ruby> = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>n</mi><mi>u</mi><mi>m</mi><mi>b</mi><mi>e</mi><mi>r</mi><mtext>  </mtext><mi>o</mi><mi>f</mi><mtext>  </mtext><mi>i</mi><mi>n</mi><mi>s</mi><mi>t</mi><mi>r</mi><mi>u</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>s</mi></mrow><mrow><mi>C</mi><mi>P</mi><mi>I</mi><mo>×</mo><msup><mn>10</mn><mn>6</mn></msup></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{number\;of\;instructions}{CPI\times10^6}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3355em;vertical-align:-0.4033em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9322em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">CP</span><span class="mord mathnormal mtight" style="margin-right:0.07847em;">I</span><span class="mbin mtight">×</span><span class="mord mtight">1</span><span class="mord mtight"><span class="mord mtight">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7463em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4461em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">mb</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">er</span><span class="mspace mtight" style="margin-right:0.3253em;"></span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight" style="margin-right:0.10764em;">f</span><span class="mspace mtight" style="margin-right:0.3253em;"></span><span class="mord mathnormal mtight">in</span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></li><li class="lvl-6"><ruby>MFLOPS<rt>Million Floating point Operations Per Second，百万浮点数操作每秒</rt></ruby></li><li class="lvl-6"><ruby>加速比<rt>Speedup</rt></ruby>：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>=</mo><mfrac><msub><mi>T</mi><mi>Y</mi></msub><msub><mi>T</mi><mi>X</mi></msub></mfrac></mrow><annotation encoding="application/x-tex">S=\frac{T_Y}{T_X}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3339em;vertical-align:-0.4453em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8886em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567em;margin-left:-0.1389em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07847em;">X</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4103em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567em;margin-left:-0.1389em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4453em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> 其中 T<sub>Y</sub> 是优化时间前的时间，T<sub>X</sub> 是优化时间后的指令</li><li class="lvl-6"><ruby>标准基准程序<rt>Benchmark</rt></ruby></li></ul></li></ul><h1 id="高速缓冲存储器">高速缓冲存储器</h1><h2 id="Cache-的原理">Cache 的原理</h2><ul class="lvl-0"><li class="lvl-2"><p><ruby>局部性原理<rt>Principle of Locality</rt></ruby></p><ul class="lvl-2"><li class="lvl-6"><ruby>时间局部性<rt>Temporal Locality</rt></ruby>：刚被访问的存储单元可能马上要再次访问</li><li class="lvl-6"><ruby>空间局部性<rt>Spatial Locality</rt></ruby>：刚被访问的存储单元的临近单元可能马上要访问</li></ul></li><li class="lvl-2"><p><ruby>高速缓冲存储器<rt>Cache</rt></ruby>：在 CPU 和主存中间设置，容量小，速度快，存储需要频繁访问的程序块和数据</p></li><li class="lvl-2"><p>存储系统的层次结构</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1 ns    Reg                          1 KB</span><br><span class="line">2 ns    Cache                        1 MB</span><br><span class="line">10 ns   Main Mem                     1 GB</span><br><span class="line">10 ns   Disk Cache                   1 GB</span><br><span class="line">10 ms   Magnetic Disk                500 GB</span><br><span class="line">10 s    Magnetic Tape/Optical Disk   100 TB</span><br></pre></td></tr></table></figure><ul class="lvl-0"><li class="lvl-2"><p>CPU 访问顺序</p><ul class="lvl-2"><li class="lvl-6">寄存器 -&gt; Cache -&gt; RAM -&gt; 硬盘</li></ul></li><li class="lvl-2"><p>相关术语</p><ul class="lvl-2"><li class="lvl-6"><ruby>数据块<rt>Block</rt></ruby>：Cache 的存储单元，Cache 和主存的基本划分单位<ul class="lvl-4"><li class="lvl-10">内存按照 Block 划分并映射到 Cache 的相应位置，Cache 与主存间按照 Block 为单位进行数据交换</li></ul></li><li class="lvl-6"><ruby>标记<rt>Tag</rt></ruby>：保存该数据块对应的主存数据块的地址信息</li><li class="lvl-6"><ruby>有效位<rt>Valid bit, v</rt></ruby>：记录对应数据块的数据是否有效，一个 Block 一个有效位</li><li class="lvl-6"><ruby>行<rt>Line</rt></ruby>：Cache 中一个 <code>&#123;v&#125;&#123;Tag&#125;&#123;Data Block&#125;</code> 为一行</li><li class="lvl-6"><ruby>组<rt>Set</rt></ruby>：若干数据块为一组，地址比较一般能在组内各块间同时进行</li><li class="lvl-6"><ruby>路<rt>Way</rt></ruby>：Cache 相关联的等级，各路地址比较可以同时进行，路数等于一组内的数据块数</li><li class="lvl-6"><ruby>命中率<rt>Hit Rate</rt></ruby>：访问时，目标数据在 Cache 中的比例</li><li class="lvl-6"><ruby>缺失率<rt>Miss Rate</rt></ruby>：访问时，目标数据不在 Cache 中的比例</li></ul></li><li class="lvl-2"><p>当数据被引用</p><ul class="lvl-2"><li class="lvl-6"><ruby>命中<rt>Hit</rt></ruby>：数据在 Cache 中</li><li class="lvl-6"><ruby>缺失<rt>Miss</rt></ruby>：将相应的 Block 调入 Cache，可能踢出别的 Block</li></ul></li><li class="lvl-2"><p>Cache 基本结构</p><ul class="lvl-2"><li class="lvl-6">存储：以 Block （若干字）为单位</li><li class="lvl-6">地址：地址比较、地址转换、<ruby>地址标记<rt>Tag</rt></ruby>，一个 Block 有一个 Tag</li><li class="lvl-6">替换：记录 Block 使用情况、替换策略、<ruby>有效位<rt>v</rt></ruby>记录对应数据块的数据是否有效</li></ul></li><li class="lvl-2"><p>Cache 读操作过程</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">开始</span><br><span class="line">接受来自 CPU 的地址</span><br><span class="line">if (Cache 中包含此数据块) then</span><br><span class="line">    从 Cache 中读取数据交给 CPU</span><br><span class="line">else then</span><br><span class="line">    从主存中读取数据</span><br><span class="line">    在 Cache 中分配一个数据块</span><br><span class="line">    当前数据交给 CPU</span><br><span class="line">    从主存中读取当前数据块到 Cache</span><br><span class="line">endif</span><br><span class="line">结束</span><br></pre></td></tr></table></figure><h2 id="Cache-的映射机制">Cache 的映射机制</h2><ul class="lvl-0"><li class="lvl-2"><p>Cache 的映射：多个主存的数据块映射到一个 Cache 的数据块中</p></li><li class="lvl-2"><p>直接映射</p><ul class="lvl-2"><li class="lvl-6">主存的第 J 块映射到 Cache 中的固定块 K，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mo>=</mo><mi>J</mi><mspace></mspace><mspace width="0.6667em"><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>M</mi></mspace></mrow><annotation encoding="application/x-tex"> K = J \mod M </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mspace allowbreak"></span><span class="mspace" style="margin-right:0.6667em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span>，其中 M 是 Cache 包含的块数</li><li class="lvl-6">主存的地址格式：<ruby>区地址<rt>Tag</rt></ruby>，<ruby>区内块地址<rt>Index</rt></ruby>，<ruby>块内偏移量<rt>Offset</rt></ruby></li></ul></li><li class="lvl-2"><p><ruby>组相联映射<rt>Set Asscociative</rt></ruby></p><ul class="lvl-2"><li class="lvl-6">Cache 分成 K 组，每组 L 块；主存的块 J 按照下列规则映射到 Cache 的组 I 中的 <ins>任何一块</ins>：</li></ul>  <span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>I</mi><mo>=</mo><mi>J</mi><mspace></mspace><mspace width="1em"><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>K</mi></mspace></mrow><annotation encoding="application/x-tex">    I = J\mod K    </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mspace allowbreak"></span><span class="mspace" style="margin-right:1em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span></span><ul class="lvl-2"><li class="lvl-6">主存的地址格式：<ruby>组内块地址<rt>Tag</rt></ruby>，<ruby>组地址<rt>#Set</rt></ruby>，<ruby>块内地址<rt>Offset</rt></ruby></li></ul></li><li class="lvl-2"><p><ruby>全相联映射<rt>Full Associate</rt></ruby></p><ul class="lvl-2"><li class="lvl-6">主存分为若干 Block，Cache 按照同样大小也分成若干 Block，Cache 中的 Block 比 主存中的少得多。主存的某一个 Block 可以映射到 Cache 中的任意一个 Block</li><li class="lvl-6">主存的地址格式：<ruby>块地址<rt>Block Number(Tag)</rt></ruby>，<ruby>块内地址<rt>Offset</rt></ruby></li></ul></li></ul><h2 id="Cache-基本参数">Cache 基本参数</h2><ul class="lvl-0"><li class="lvl-2"><p>M = 2<sup>m</sup>，表地址空间大小（byte），如 2<sup>32</sup></p></li><li class="lvl-2"><p>G = 2<sup>g</sup>，表 Cache 访问的粒度大小（byte），如 4</p></li><li class="lvl-2"><p>C，表 Cache 的容量（byte），如 16 KByte</p></li><li class="lvl-2"><p>B = 2<sup>b</sup>，Cache 块的大小（byte），如 16</p></li><li class="lvl-2"><p>a，Cache 的相联度</p></li></ul><h2 id="Cache-的替换策略">Cache 的替换策略</h2><ul class="lvl-0"><li class="lvl-2"><p><ruby>强制<rt>Compulsory</rt></ruby>缺失：第一次引用某个地址（块）时总是出现缺失（Cache 为空）</p></li><li class="lvl-2"><p><ruby>容量<rt>Capacity</rt></ruby>缺失：Cache 太小，不足以保持需要的每一个数据</p></li><li class="lvl-2"><p><ruby>冲突<rt>Conflict</rt></ruby>缺失，不属于上述二者的所有情况</p></li><li class="lvl-2"><p>缺失损失：CPU 等待数据装入 Cache 的时间</p></li><li class="lvl-2"><p>取出块的时间：第一个字的延迟时间 + 块剩余部分的传送时间</p></li><li class="lvl-2"><p>LRU 法</p><ul class="lvl-2"><li class="lvl-6">原则：将近期使用最少的块替换出去</li></ul></li><li class="lvl-2"><p>FIFO 法</p><ul class="lvl-2"><li class="lvl-6">原则：总将最先调入 Cache 的块替换出去</li></ul></li></ul><h2 id="Cache-性能分析">Cache 性能分析</h2><ul class="lvl-0"><li class="lvl-2"><p>Cache 容量</p><ul class="lvl-2"><li class="lvl-6">不作特殊申明时，指的是 Cache 数据块的容量</li><li class="lvl-6">实际容量还包括 Tag 和 Valid bit 的位数</li></ul></li><li class="lvl-2"><p>直接映射的分析</p><ul class="lvl-2"><li class="lvl-6">Cache 每数据块大小为 2<sup>b</sup> bytes，则块内偏移量位数为 b；Cache 块数为 2<sup>n</sup> 个，则块地址位数为 n，则 <code>主存Tag 位数</code> 等于 <code>Cache 的 Tag 位数</code> 等于 <code>主存地址总位数 - b - n</code></li><li class="lvl-6">Cache 实际容量等于 <code>Cache 块数 * (Valid Bit(1 位) + Data Block(位) + Tag(位))</code>，单位为 bits（若无其它要求）</li></ul></li><li class="lvl-2"><p>组相联映射的分析</p><ul class="lvl-2"><li class="lvl-6">Cache 每数据块大小为 2<sup>b</sup> bytes，则块内偏移量位数为 b；Cache 组数为 2<sup>n</sup> 组，则组地址位数为 n，则 <code>主存Tag 位数</code> 等于 <code>Cache 的 Tag 位数</code> 等于 <code>主存地址总位数 - b - n</code></li><li class="lvl-6">Cache 实际容量等于 <code>Cache 块数 * (Valid Bit(1 位) + Data Block(位) + Tag(位))</code>，单位为 bits（若无其它要求）</li></ul></li><li class="lvl-2"><p>访存时间</p><ul class="lvl-2"><li class="lvl-6">T<sub>M</sub> 为主存的访问周期，T<sub>C</sub> 为 Cache 的访问周期，H 为 Cache 的命中率，则存储系统的等效访问周期是：</li></ul>  <span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>T</mi><mo>=</mo><msub><mi>T</mi><mi>C</mi></msub><mo>×</mo><mi>H</mi><mo>+</mo><msub><mi>T</mi><mi>M</mi></msub><mo>×</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>H</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">    T=T_C \times H + T_M\times (1-H)    </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mclose">)</span></span></span></span></span><ul class="lvl-2"><li class="lvl-6">加速比是：</li></ul>  <span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>S</mi><mi>p</mi></msub><mo>=</mo><mfrac><msub><mi>T</mi><mi>M</mi></msub><mi>T</mi></mfrac></mrow><annotation encoding="application/x-tex">    S_p = \frac{T_M}{T}    </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.0463em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></li></ul><h1 id="外部存储，总线与-I-O">外部存储，总线与 I/O</h1><h2 id="外部存储">外部存储</h2><ul class="lvl-0"><li class="lvl-2"><p>磁盘存储器</p><ul class="lvl-2"><li class="lvl-6">磁头</li><li class="lvl-6">软盘/硬盘</li><li class="lvl-6">磁记录材料</li><li class="lvl-6">片基（载体）</li></ul></li><li class="lvl-2"><p>硬磁盘原理</p><ul class="lvl-2"><li class="lvl-6">一些术语<ul class="lvl-4"><li class="lvl-10"><ruby>磁头<rt>Head</rt></ruby>：一个磁盘有若干盘片，每个盘片有上下两个盘面，每个盘面由一个磁头负责读写</li><li class="lvl-10"><ruby>磁道<rt>Track</rt></ruby>：磁盘表面的同心圆环</li><li class="lvl-10"><ruby>扇区<rt>Sector</rt></ruby>：每个磁道包含若干扇区，扇区是读写最小单位，容量默认为 512 字节。每个磁道包含相同数量扇区</li><li class="lvl-10"><ruby>柱面<rt>Cylinder</rt></ruby>：不同盘面的同一半径上的磁道构成一个柱面</li></ul></li><li class="lvl-6">扇区的地址表示：<ruby>柱面号<rt>Cyliner #</rt></ruby>，<ruby>磁头号<rt>Head #</rt></ruby>，<ruby>扇区号<rt>Sector #</rt></ruby></li><li class="lvl-6">磁盘存储结构<ul class="lvl-4"><li class="lvl-10"><ruby>恒定角速度<rt>Constant Angular Velocity</rt></ruby></li><li class="lvl-10"><ruby>多重区域记录<rt>Multiple Zone Recording</rt></ruby></li></ul></li></ul></li><li class="lvl-2"><p>磁盘的性能参数</p><ul class="lvl-2"><li class="lvl-6">道密度</li><li class="lvl-6">位密度</li><li class="lvl-6">存储容量：磁头数 * 磁道（柱面数）* 每道扇区数 * 每扇区字节数</li><li class="lvl-6">旋转速率 r</li><li class="lvl-6">寻道时间 T<sub>S</sub>：磁头从当前位置定位到目标磁道的时间（平均值）</li><li class="lvl-6"><ruby>寻区时间<rt>旋转延迟</rt></ruby> T<sub>W</sub>：磁头定位到目标磁道后，等待目标扇区旋转到磁头下的时间（平均值 1/2r，旋转一周的时间乘以 1/2）</li><li class="lvl-6">访问时间 T<sub>A</sub>：T<sub>A</sub> = T<sub>S</sub> + T<sub>W</sub></li><li class="lvl-6">数据传输率 D<sub>r</sub></li></ul></li><li class="lvl-2"><p>硬磁盘的种类</p></li><li class="lvl-2"><p><ruby>独立冗余磁盘阵列<rt>Reduntant Array of Independent Disks, RAID</rt></ruby></p></li><li class="lvl-2"><p><ruby>固态硬盘<rt>Solid State Drive, SSD</rt></ruby></p></li><li class="lvl-2"><p><ruby>光盘<rt>CD-ROM</rt></ruby></p></li><li class="lvl-2"><p><ruby>DVD<rt>Digital Video Disk</rt></ruby></p></li></ul><h2 id="总线">总线</h2><ul class="lvl-0"><li class="lvl-2"><p>片内总线：芯片内部连接各元件的总线</p></li><li class="lvl-2"><p>系统总线：CPU、主存、I/O 接口等之间传递信息的公共通道，一般分为数据总线，地址总线和控制总线三部分</p><ul class="lvl-2"><li class="lvl-6">数据总线：传递数据</li><li class="lvl-6">地址总线：传递存储器地址和 I/O 地址</li><li class="lvl-6">控制总线<ul class="lvl-4"><li class="lvl-10">数据传输控制</li><li class="lvl-10">总线请求和交换</li><li class="lvl-10">时钟、复位、电源等</li></ul></li></ul></li><li class="lvl-2"><p>I/O 总线：连接 I/O 设备</p></li><li class="lvl-2"><p>通信总线：用于计算机系统间或计算机系统与其它系统间的通信</p></li><li class="lvl-2"><p>单总线结构</p></li><li class="lvl-2"><p>多总线结构</p></li><li class="lvl-2"><p>总线标准</p></li><li class="lvl-2"><p>总线设计要素和性能指标</p><ul class="lvl-2"><li class="lvl-6">类型</li><li class="lvl-6">集中式或分布式</li><li class="lvl-6">异步或同步</li><li class="lvl-6">信号线数：所有信号线的总数</li><li class="lvl-6">总线宽度：数据总线位数，如 32，64</li><li class="lvl-6">总线频率：总线时钟频率</li><li class="lvl-6">总线传输周期：完成一次总线操作需要的时间</li><li class="lvl-6">总线带宽：总线的最大传输速率（<ruby>MB<rt>10<sup>6</sup> Bytes</rt></ruby>/s 或 <ruby>GB<rt>10<sup>9</sup> Bytes</rt></ruby>/s）</li><li class="lvl-6">负载能力：总线上能同时连接的设备数</li></ul></li><li class="lvl-2"><p>总线传输过程</p><ul class="lvl-2"><li class="lvl-6">主设备请求使用总线，总线控制器决策，主设备获得总线使用权</li><li class="lvl-6">主设备发出目标地址和控制指令，找到目标设备</li><li class="lvl-6">进行数据传输</li><li class="lvl-6">主设备释放总线使用权</li></ul></li></ul><h2 id="I-O-接口">I/O 接口</h2><ul class="lvl-0"><li class="lvl-2"><p>功能</p><ul class="lvl-2"><li class="lvl-6">设备寻址</li><li class="lvl-6">数据交互</li><li class="lvl-6">设备控制</li><li class="lvl-6">状态检测</li><li class="lvl-6">数据缓冲</li><li class="lvl-6">格式转换</li></ul></li><li class="lvl-2"><p>分类</p><ul class="lvl-2"><li class="lvl-6">按传送数据格式<ul class="lvl-4"><li class="lvl-10">串行接口</li><li class="lvl-10">并行接口</li></ul></li><li class="lvl-6">按 I/O 方式<ul class="lvl-4"><li class="lvl-10">程序查询接口</li><li class="lvl-10">中断接口</li><li class="lvl-10">DMA 接口</li></ul></li><li class="lvl-6">按时序控制方式<ul class="lvl-4"><li class="lvl-10">同步</li><li class="lvl-10">异步</li></ul></li></ul></li><li class="lvl-2"><p>I/O 过程</p><ul class="lvl-2"><li class="lvl-6">处理器查询外设状态</li><li class="lvl-6">I/O 接口回送外设状态</li><li class="lvl-6">设备可用且准备好，则处理器向 I/O 接口发送命令请求传送</li><li class="lvl-6">I/O 设备获得外设的数据并传给处理器</li></ul></li></ul><h2 id="I-O-数据传送方式">I/O 数据传送方式</h2><ul class="lvl-0"><li class="lvl-2"><p><ruby>程序查询 I/O 方式<rt>编程式 I/O</rt></ruby></p><ul class="lvl-2"><li class="lvl-6">检测设备状态</li><li class="lvl-6">发送 I/O 命令<ul class="lvl-4"><li class="lvl-10">包括控制命令，测试命令，读写命令</li></ul></li><li class="lvl-6">处理器等待 I/O 操作完成</li><li class="lvl-6">传送数据</li><li class="lvl-6">特点：I/O 操作由 CPU 完成，因为外设速度慢，CPU 不断轮询降低效率</li></ul></li><li class="lvl-2"><p>中断 I/O 方式</p><ul class="lvl-2"><li class="lvl-6"><a href="#%E4%B8%AD%E6%96%AD%E5%BC%82%E5%B8%B8">关于异常和中断</a></li><li class="lvl-6">中断源<ul class="lvl-4"><li class="lvl-10">硬件故障</li><li class="lvl-10">I/O</li><li class="lvl-10">外部事件</li><li class="lvl-10">更多……</li></ul></li><li class="lvl-6">中断编码：每个中断源独有的代号</li><li class="lvl-6">中断请求及其硬件支持，优先级判断<ul class="lvl-4"><li class="lvl-10">非屏蔽中断 &gt; 内部异常中的终止 &gt; 其它内部异常 &gt; 可屏蔽中断</li></ul></li><li class="lvl-6">中断响应</li><li class="lvl-6">中断处理</li><li class="lvl-6">特点：I/O 操作由 CPU 完成，外设准备期间，CPU 可以执行其他程序，和外设的工作并行，是目前最主要的 I/O 方式</li></ul></li><li class="lvl-2"><p><ruby>DMA<rt>Direct Memory Access</rt></ruby> I/O 方式</p><ul class="lvl-2"><li class="lvl-6">DMA：CPU 对总线的控制被临时禁止，DMA 控制器接管总线，控制数据在存储器和外设之间高速交换，适合高速批量数据传输</li><li class="lvl-6">DMA 过程（停止 CPU 访问内存）<ul class="lvl-4"><li class="lvl-10">外设通过 DMA 控制器向 CPU 发出 DMA 请求</li><li class="lvl-10">CPU 在当前总线周期结束后响应，总线控制权交给 DMA 控制器</li><li class="lvl-10">DMA 控制器向总线发送信号和数据等</li><li class="lvl-10">所有数据传送完毕后，通过中断告知 CPU，交还总线控制权</li></ul></li><li class="lvl-6">DMA 过程（周期挪用）</li><li class="lvl-6">DMA 控制器结构</li></ul></li><li class="lvl-2"><p>通道 I/O 方式</p><ul class="lvl-2"><li class="lvl-6">I/O 通道：一种专用的 I/O 控制器，与 CPU 共享内存。I/O 通道负责实现和管理 I/O</li><li class="lvl-6">选择通道</li><li class="lvl-6">字节多路通道</li><li class="lvl-6">数组多路通道</li></ul></li></ul>]]></content:encoded>
      
      
      <category domain="https://samuflore.top/categories/2025-2026-%E5%AD%B8%E5%B9%B4/">2025 - 2026 學年</category>
      
      <category domain="https://samuflore.top/categories/2025-2026-%E5%AD%B8%E5%B9%B4/%E8%A8%88%E7%AE%97%E6%A9%9F%E7%B5%84%E6%88%90%E5%8E%9F%E7%90%86/">計算機組成原理</category>
      
      
      <category domain="https://samuflore.top/tags/CO/">CO</category>
      
      
      <comments>https://samuflore.top/posts/52a88c87/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>[C Primer Minus]Vol. 2: DS</title>
      <link>https://samuflore.top/posts/163b741/</link>
      <guid>https://samuflore.top/posts/163b741/</guid>
      <pubDate>Mon, 15 Dec 2025 16:25:53 GMT</pubDate>
      
      <description>&lt;h1 id=&quot;序&quot;&gt;序&lt;/h1&gt;
&lt;p&gt;这是名为《C Primer Minus》的 C 语言简易教程第二册：&lt;ruby&gt;数据结构&lt;rt&gt;Data Structure&lt;/rt&gt;&lt;/ruby&gt;篇。&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<h1 id="序">序</h1><p>这是名为《C Primer Minus》的 C 语言简易教程第二册：<ruby>数据结构<rt>Data Structure</rt></ruby>篇。</p><span id="more"></span>]]></content:encoded>
      
      
      <category domain="https://samuflore.top/categories/C-Primer-Minus/">C Primer Minus</category>
      
      
      <category domain="https://samuflore.top/tags/Tutorial/">Tutorial</category>
      
      <category domain="https://samuflore.top/tags/C/">C</category>
      
      <category domain="https://samuflore.top/tags/Guidance/">Guidance</category>
      
      <category domain="https://samuflore.top/tags/Data-Structure/">Data Structure</category>
      
      
      <comments>https://samuflore.top/posts/163b741/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>[C Primer Minus]Vol. 1: FoP</title>
      <link>https://samuflore.top/posts/4e5073f7/</link>
      <guid>https://samuflore.top/posts/4e5073f7/</guid>
      <pubDate>Mon, 15 Dec 2025 16:24:37 GMT</pubDate>
      
      <description>&lt;h1 id=&quot;序&quot;&gt;序&lt;/h1&gt;
&lt;p&gt;这是名为《C Primer Minus》的 C 语言简易教程第一册：&lt;ruby&gt;程序设计基础&lt;rt&gt;Fundamentals of Programming&lt;/rt&gt;&lt;/ruby&gt;篇。&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<h1 id="序">序</h1><p>这是名为《C Primer Minus》的 C 语言简易教程第一册：<ruby>程序设计基础<rt>Fundamentals of Programming</rt></ruby>篇。</p><span id="more"></span>]]></content:encoded>
      
      
      <category domain="https://samuflore.top/categories/C-Primer-Minus/">C Primer Minus</category>
      
      
      <category domain="https://samuflore.top/tags/Tutorial/">Tutorial</category>
      
      <category domain="https://samuflore.top/tags/C/">C</category>
      
      <category domain="https://samuflore.top/tags/Guidance/">Guidance</category>
      
      <category domain="https://samuflore.top/tags/Fundamentals-of-Programming/">Fundamentals of Programming</category>
      
      
      <comments>https://samuflore.top/posts/4e5073f7/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>[楠竹蓮花集]十二月八日</title>
      <link>https://samuflore.top/posts/1a21b5b/</link>
      <guid>https://samuflore.top/posts/1a21b5b/</guid>
      <pubDate>Tue, 09 Dec 2025 04:29:46 GMT</pubDate>
      
      <description>&lt;h1 id=&quot;序&quot;&gt;序&lt;/h1&gt;
&lt;p&gt;二〇二五年十二月八日是个重大的日子。这一天结束了我的计组实验，同时让我第一次意识到我已经是个成年人了。&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<h1 id="序">序</h1><p>二〇二五年十二月八日是个重大的日子。这一天结束了我的计组实验，同时让我第一次意识到我已经是个成年人了。</p><span id="more"></span><p>我并不认为一个人会因为过了一次 18 岁生日就从一个未成年的个体变为一个成年人的个体。如果我对我自己的想法都如此，那么很自然我对我同龄人的想法也是如此。直到十二月八日我发现大家都变成大人了，那么我自然也应该变成大人了。</p><p>但我仍然有些难以置信。我并不觉得 18 岁生日到现在我的思维和处事方式发生了什么质的改变，熟悉的人对我的观点也并没有因为我过了 18 岁生日而发生显著的改变。最重要的，我平时做的事也并没有因为过了那个时间节点就完全不一样起来——现在仍然是每天学习，有时画画，练字，以及打游戏。</p><p>相应的，我感觉我的烦恼也没有因为步入成年而变成成年人的烦恼。学习上，时间安排上，今天吃什么，周末要不要出去玩之类的烦恼，仍然还是小孩一样。感情上的烦恼倒是已经略微脱离学生时代的青涩，而加入了一些可以被称之为“成年人的烦恼”的东西了，比如花钱的问题——而这主要是经济不独立导致的。</p><p>但当我发现我的同龄人竟然真正地出现了成年人的烦恼时，我突然觉得我也出现了成年人的烦恼。第一个成年人的烦恼，就是烦恼自己竟然已经有了成年人的烦恼。这让我立刻从脱离计组苦海的高兴转为一种莫名的悲伤中。</p><p>而第二个烦恼就是我突然发现大家真的都发生了很大的变化。从这个角度来看我感觉我确实是一个很恋旧的人 ww。对大家的印象还停留在很久以前，殊不知别人并不会保持我以为的一成不变，尽管他们自己说不定也意识不到自己发生了这样的变化，就像我一样。<br>好吧，这也是在所难免的。上了大学就是这样，当你交新朋友的速度远远低于和老朋友断开联系的速度的时候，你就会发现自己已经近乎成为一座孤岛了。</p><p>是的，当我写下这一段的时候，我已经出现了第三个烦恼。那就是端水的艺术真的完全学不会。</p><p>算了，如果有什么是不会变的话，恐怕是<ins>弔人</ins>喜欢的糖和茶了吧。</p><p><img src="/posts/1a21b5b/%E8%81%8A%E5%A4%A9%E8%AE%B0%E5%BD%95.jpg" alt="弔人还是那个弔人没变"></p>]]></content:encoded>
      
      
      <category domain="https://samuflore.top/categories/%E6%A5%A0%E7%AB%B9%E8%93%AE%E8%8A%B1%E9%9B%86/">楠竹蓮花集</category>
      
      
      
      <comments>https://samuflore.top/posts/1a21b5b/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>[CO Finale] 2025 北航计算机组成实验总结</title>
      <link>https://samuflore.top/posts/444343b2/</link>
      <guid>https://samuflore.top/posts/444343b2/</guid>
      <pubDate>Mon, 08 Dec 2025 15:26:29 GMT</pubDate>
      
      <description>&lt;h1 id=&quot;序&quot;&gt;序&lt;/h1&gt;
&lt;p&gt;买了点烤串，买了一杯 RIO 回寝室放松一下。&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<h1 id="序">序</h1><p>买了点烤串，买了一杯 RIO 回寝室放松一下。</p><span id="more"></span><h1 id="Pre-到-P7">Pre 到 P7</h1><p>当我 P1 第二题一直卡到出提示才做出来，我的内心在想什么呢？可能是对计组闯关制的愤怒吧，可能是对每天抽时间打游戏的悔恨吧，但那已经过去很久了。<br>当我 P3 在加时的最后关头发现自己的 bug 却无能为力，只有颤抖的手和叹不完的气的时候，我的内心在想什么呢？可能是对计组实验的绝望吧，可能那是我最讨厌 Logisim 的时候吧，它和以前我在 BiliBili 上看到的画画做 CPU 完全是两回事。<br>但那也过去很久了。</p><p>当 P7 问答结束，我关闭所有窗口的时候，我的内心在想什么呢？恐怕只剩下去小酌一杯的想法了吧。</p><p>现在回头看看，其实的确，计组实验的高压和紧张氛围相当程度上是人营造出来的，但它 40% 的占比和计组这门课 5.5 分的重量也不可否认。以及不得不品的特色闯关制：课下没通过，不允许参加课上，课上没通过，进度会卡住，最终成绩取决于最终的进度和过题数。</p><p>挂掉 P3，或许确实是一个巨大的打击。但是经过这么多 P 的通过，以及看水群里的各种哀嚎（？），我渐渐觉得第一次 P3 挂掉（或者说 Gap 一周）并不是什么坏事了。如果接下来每个 P 都能顺利过的话，相当于避开了最难的一轮题目，去做难度最低的一轮（第三轮又会出现第一轮的难题，因此第二轮的确可以称之为最简单），我想我 P4 到 P6 能顺利过很大程度上是因为这个原因，不然可能还得挂几回www</p><h1 id="CO-的神">CO 的神</h1><p>此处鸣谢帮助我通过 CO 实验的所有大神，膜了：伟大的记录了上机原题的神：<a href="https://roife.github.io/">ROIFE BLOG</a><br>真正的指导书，6 系和 21 系共同的神：<a href="https://kamonto.github.io/Kamonto_blog/">Kamonto’s Little Planet</a><br>给同样挂掉 P3 的我指引方向的神：<a href="https://pzhwuhu.github.io/">鹏哥</a>制作评测机的神：<a href="https://kie-chi.com/">Trash Bin for Chi</a><br>2306 计组的神：<a href="https://lazyfish-lc.github.io/">Lazyfish &amp; chilly_river</a><br>神的神：<a href="https://flyinglandlord.github.io/">FlyingLandlord’s Blog</a><br>以及其它为我提供帮助的大佬，感谢www</p><h1 id="一些小提示">一些小提示</h1><ol><li class="lvl-3"><p>Toby Shi 等开发的基于 MARS 4.5 魔改的用于计组和编译的 MARS <a href="https://github.com/Toby-Shi-cloud/Mars-with-BUAA-CO-extension">由此下载</a>，支持输出写入信息，添加自定义指令等。</p></li><li class="lvl-3"><p>MARS 有一处 bug，具体表现在 <code>lb</code> 读取 <code>0x00002fff</code> 地址时发生异常，而这在课程要求内并不应该发生异常。</p></li><li class="lvl-3"><p>COT 评测机如果无法在 Windows 平台上运行（比如 curse 库），可以用课程组发的 Debian 虚拟机（虚拟机最有用的一集）。</p></li></ol><h1 id="计组实验">计组实验</h1><p>再见，再见，不如争取理论考试再多做对几道题。</p>]]></content:encoded>
      
      
      <category domain="https://samuflore.top/categories/2025-2026-%E5%AD%B8%E5%B9%B4/">2025 - 2026 學年</category>
      
      <category domain="https://samuflore.top/categories/2025-2026-%E5%AD%B8%E5%B9%B4/%E8%A8%88%E7%AE%97%E6%A9%9F%E7%B5%84%E6%88%90%E5%8E%9F%E7%90%86/">計算機組成原理</category>
      
      
      <category domain="https://samuflore.top/tags/CO/">CO</category>
      
      
      <comments>https://samuflore.top/posts/444343b2/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>[CO P7]Verilog 设计 MIPS 微系统</title>
      <link>https://samuflore.top/posts/28be479a/</link>
      <guid>https://samuflore.top/posts/28be479a/</guid>
      <pubDate>Mon, 08 Dec 2025 14:48:21 GMT</pubDate>
      
      <description>&lt;h1 id=&quot;序&quot;&gt;序&lt;/h1&gt;
&lt;p&gt;It’s time to leave all behind.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<h1 id="序">序</h1><p>It’s time to leave all behind.</p><span id="more"></span><h1 id="设计方案">设计方案</h1><h2 id="CP0-协处理器">CP0 协处理器</h2><h3 id="端口定义">端口定义</h3><table><thead><tr><th>名称</th><th>类型</th><th>位宽</th><th>方向</th><th>含义</th></tr></thead><tbody><tr><td>clk</td><td>wire</td><td>1</td><td>I</td><td>时钟信号</td></tr><tr><td>reset</td><td>wire</td><td>1</td><td>I</td><td>同步复位信号</td></tr><tr><td>enable</td><td>wire</td><td>1</td><td>I</td><td>CP0 中寄存器写使能</td></tr><tr><td>CP0_addr</td><td>wire</td><td>4:0</td><td>I</td><td>要写入的寄存器地址（12 或 14）</td></tr><tr><td>CP0_in</td><td>wire</td><td>31:0</td><td>I</td><td>CP0 写入数据</td></tr><tr><td>VPC</td><td>wire</td><td>31:0</td><td>I</td><td>受害 PC，陷入内核时传递给 CP0</td></tr><tr><td>BD_in</td><td>wire</td><td>1</td><td>I</td><td>是否为延迟槽指令</td></tr><tr><td>ExcCode_in</td><td>wire</td><td>4:0</td><td>I</td><td>内部异常代码</td></tr><tr><td>HWInt</td><td>wire</td><td>5:0</td><td>I</td><td>外部中断信号</td></tr><tr><td>EXL_clr</td><td>wire</td><td>1</td><td>I</td><td>SR_EXL 复位信号，返回现场</td></tr><tr><td>CP0_out</td><td>wire</td><td>31:0</td><td>O</td><td>CP0 读出数据</td></tr><tr><td>EPC_out</td><td>wire</td><td>31:0</td><td>O</td><td>EPC 读出数据</td></tr><tr><td>Req</td><td>wire</td><td>1</td><td>O</td><td>陷入内核请求</td></tr></tbody></table><h3 id="MFC0-与-MTC0">MFC0 与 MTC0</h3><p>MFC0 和 MTC0 专为 CP0 内置的寄存器使用。MTC0 只允许写入 SR 和 EPC 两个寄存器，故其 rd 为 13 或 15 时保持原始值不变即可。</p><p>主模块中，要将 CP0 的输出 <code>CP0_output</code> 与 E 级来的 <code>E_exact_outputA</code>（ALU 或 MDU）合流，形成 <code>M_exact_outputA</code> 给到 W 级。</p><p>综上需要在 MController 传出 <code>CP0_enable</code> 和 <code>CP0_output_sel</code> 两个信号。</p><h3 id="四个寄存器">四个寄存器</h3><h4 id="SR">SR</h4><p><code>SR[15:10]: SR_IM</code> 每一位表示每个外部中断的开关，该位为 1 时，允许处理这个外部中断。<br><code>SR[1]: SR_EXL</code> 置为 0 时，允许处理外部中断和内部异常，否则一律拒绝。<br><code>SR[0]: SR_IE</code> 置为 1 时，允许处理内部异常，否则一律拒绝。</p><p><strong>注意 SR_EXL 和 SR_IE 值对应的效果相反</strong></p><h4 id="Cause">Cause</h4><p><code>Cause[31]: Cause_BD</code> 置为 1 时，表示陷入内核时的这条指令位于延迟槽中。<br><code>Cause[15:10]: Cause_IP</code> 每一位表示一种外部设备，该位为 1 时，表示该设备触发了外部中断。<br><code>Cause[6:2]: Cause_ExcCode</code> 内部异常的异常码。</p><h4 id="EPC">EPC</h4><p>记录陷入内核时的指令地址。当陷入内核时的指令是延迟槽指令时，则记录其上一条指令的地址，否则就是这一条的地址。</p><p><strong>由于 CP0 在 M 级，则宏观 PC 位于 M 级，EPC 记录的也是 M 级的情况。</strong></p><h4 id="PRId">PRId</h4><p>CPU 标识码，只读。</p><h2 id="内部异常与外部中断">内部异常与外部中断</h2><table><thead><tr><th>类型</th><th>ExcCode</th></tr></thead><tbody><tr><td>外部中断 - [x]</td><td>0</td></tr><tr><td>PC 对齐错误 - [x]</td><td>4</td></tr><tr><td>PC 超出 <code>0x3000 ~ 0x6ffc</code> - [x]</td><td>4</td></tr><tr><td><code>lw lh</code> 地址对齐错误 - [x]</td><td>4</td></tr><tr><td><code>lh lb</code> 取 Timer 寄存器 - [x]</td><td>4</td></tr><tr><td>load 类计算地址时溢出 - [x]</td><td>4</td></tr><tr><td>load 类地址超出范围 - [x]</td><td>4</td></tr><tr><td><code>sw sh</code> 地址对齐错误 - [x]</td><td>5</td></tr><tr><td><code>sh sb</code> 存 Timer 寄存器 - [x]</td><td>5</td></tr><tr><td>store 类计算地址时溢出 - [x]</td><td>5</td></tr><tr><td>store 类向计时器的 Count 寄存器存值 - [x]</td><td>5</td></tr><tr><td>store 类地址超出范围 - [x]</td><td>5</td></tr><tr><td><code>syscall</code> - [x]</td><td>8</td></tr><tr><td>未知指令 - [x]</td><td>10</td></tr><tr><td>算术溢出 - [x]</td><td>12</td></tr></tbody></table><h3 id="F-级">F 级</h3><p>PC 未对齐或超范围，异常码为 <code>5'b00100</code>，替换错误指令为 <code>nop</code>。</p><h3 id="D-级">D 级</h3><p>D Controller 识别指令种类时，如果检测到未知指令或者 <code>syscall</code>，输出对应的异常码，否则保持 <code>5'b00000</code>。</p><h3 id="E-级">E 级</h3><p>ALU 中可能发生的异常：取地址未对齐，地址计算溢出，地址计算超范围，算数运算溢出。运算溢出的判断方法采用指令表的。从 ALU 得到 E 级的 <code>ExcCode</code>，与前面合流得到最终的 <code>ExcCode</code> 流给 M 级 CP0。<strong>合流时，倘若上一个流水级的 <code>ExcCode != 5'b00000</code>，则采用上一级的，因为需要先处理早发生的异常</strong>。</p><h3 id="M-级">M 级</h3><p>将最终的 <code>ExcCode</code> 接到 CP0 中。</p><h3 id="陷入内核">陷入内核</h3><ol><li class="lvl-3"><p>首先，VPC 是宏观 PC。</p></li><li class="lvl-3"><p>如果 D 级指令是跳转类，那么 F 级指令在延迟槽中。因此从 F 级开始判断 BD 值，并一直流水到 M 级传入 CP0。</p></li><li class="lvl-3"><p>停止异常指令及其之后的所有指令的执行，并将指令地址跳转到 <code>0x00004180</code>：</p><ol><li class="lvl-7">CP0 的 <code>Req</code> 信号控制 NPC 的计算，优先级最高。当 <code>Req</code> 为 1，NPC 结果为 <code>0x00004180</code>，并在下一周期给到 PC。<ul class="lvl-4"><li class="lvl-10">如果阻塞发生，同时需要跳转 <code>0x00004180</code>，则会因为阻塞导致 PC_en 关闭，无法把 <code>0x00004180</code> 写入 PC。因此需要调整 PC_en 在阻塞且没陷入内核的时候才能关闭。（陷入内核优先级最高）</li></ul></li><li class="lvl-7">清空所有流水级寄存器的数据，将 PC 换成 <code>0x00004180</code>，将 BD 换成 0。</li><li class="lvl-7">阻止指令产生效果：Req 为 1 则关闭 DM 写使能，禁止 CP0 的寄存器写入。</li></ol></li></ol><h3 id="返回现场">返回现场</h3><h4 id="ERET">ERET</h4><p><code>eret</code> 用于从异常处理程序回到 EPC。这个跳转指令没有延迟槽，其行为模式类似于 <code>j</code>，实现方法如果 D 级是 <code>eret</code> ，则在 F 级将 PC 替换成 EPC。<strong>要注意这样必须设置 <code>eret</code> 的 NPC_sel 为顺序执行！这样就跳过了延迟槽。</strong></p><p>另外，<code>eret</code> 流到 M 级时，需要传给 CP0 的 EXLClr，表明异常处理完了，接下来可以处理新的异常。</p><p>再另外，如果 <code>eret</code> 前一个或两个周期是写入 EPC 寄存器的 <code>mtc0</code> 指令，那么 <code>eret</code> 无法在 F 级替换出正确的 PC 值，因此直接暴力阻塞即可。</p><h2 id="外部设备和顶层通信">外部设备和顶层通信</h2><p>顶层模块 MIPS 中会实例化三个模块，分别是 CPU，两个 Timer，以及系统桥 Bridge。需要在 MIPS 中定义好各个模块之间的连线，以及和 Testbench 的连线。<br><img src="/posts/28be479a/%E6%9E%B6%E6%9E%84.jpg" alt="MIPS 微系统架构"></p><h1 id="思考题">思考题</h1><ol><li class="lvl-3"><p>请查阅相关资料，说明鼠标和键盘的输入信号是如何被 CPU 知晓的？<br><strong>答：</strong> 键盘 → (中断请求信号 + 键盘对应的输入码&lt;ASCII码&gt;) → 南桥 → 北桥 → CPU处理器 → 内存 → 硬盘。</p></li><li class="lvl-3"><p>请思考为什么我们的 CPU 处理中断异常必须是已经指定好的地址？如果你的 CPU 支持用户自定义入口地址，即处理中断异常的程序由用户提供，其还能提供我们所希望的功能吗？如果可以，请说明这样可能会出现什么问题？否则举例说明。（假设用户提供的中断处理程序合法）<br><strong>答：</strong> 首先一个固定的地址可以做到更快的访问，提高 CPU 处理中断异常的效率。并且不需要考虑用户自定义入口地址的有效性检查，减少成本。如果是用户自定义地址，也可以实现中断异常处理功能，但是有可能地址无效。</p></li><li class="lvl-3"><p>为何与外设通信需要 Bridge？<br><strong>答：</strong> 外设种类很多，对于不同的中断，需要预处理相关的信号，再统一给到 CPU 进行处理。因此需要一个模块进行中转。</p></li><li class="lvl-3"><p>请阅读官方提供的定时器源代码，阐述两种中断模式的异同，并分别针对每一种模式绘制状态移图。<br><strong>答：</strong><br><img src="/posts/28be479a/%E7%8A%B6%E6%80%81%E8%BD%AC%E7%A7%BB%E5%9B%BE1.jpg" alt="mode00"><br><code>`ctrl[2:1] == 2'b00</code> 时，倒计时结束后，产生持续的 <code>_IRQ</code> 信号。<br><img src="/posts/28be479a/%E7%8A%B6%E6%80%81%E8%BD%AC%E7%A7%BB%E5%9B%BE2.jpg" alt="mode01"><br><code>`ctrl[2:1] == 2'b01</code> 时，倒计时结束后，将 <code>_IRQ</code> 归零，即只激活一周期的信号。</p></li><li class="lvl-3"><p>倘若中断信号流入的时候，在检测宏观 PC 的一级如果是一条空泡（你的 CPU 该级所有信息均为空）指令，此时会发生什么问题？在此例基础上请思考：在 P7 中，清空流水线产生的空泡指令应该保留原指令的哪些信息？<br><strong>答：</strong> 此时往 EPC 保存的地址是 <code>0x00000000</code>，<code>BD</code> 为 0， 导致处理完异常返回原地址时找不到原来的指令。因此清空时应该保留 PC 和 BD。</p></li><li class="lvl-3"><p>为什么 jalr 指令为什么不能写成 <code>jalr $31, $31</code>？<br><strong>答：</strong> <code>jalr</code> 先将 PC + 8 写入 <code>$31</code>（转发），再跳转。故实际上无法成功跳转到 <code>$31</code> 原来的值。</p></li></ol><h1 id="测试">测试</h1><h2 id="ERET-测试">ERET 测试</h2><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ori </span>$<span class="built_in">t0</span>, <span class="number">0x00003000</span></span><br><span class="line"><span class="keyword">mtc0, </span>$<span class="built_in">t0</span>, $<span class="number">14</span></span><br><span class="line"><span class="keyword">eret</span></span><br></pre></td></tr></table></figure><h2 id="中断异常测试">中断异常测试</h2><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ori </span>$<span class="number">1</span>,$<span class="number">1</span>,<span class="number">0x1c01</span></span><br><span class="line"><span class="keyword">mtc0 </span>$<span class="number">1</span>,$<span class="number">12</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># pc地址未对齐</span></span><br><span class="line"><span class="keyword">ori </span>$<span class="number">2</span>,$<span class="number">2</span>,<span class="number">0x300a</span></span><br><span class="line"><span class="keyword">jr </span>$<span class="number">2</span></span><br><span class="line"><span class="keyword">add </span>$<span class="number">2</span>,$<span class="number">2</span>,$<span class="number">2</span></span><br><span class="line"><span class="comment"># pc地址超范围</span></span><br><span class="line"><span class="keyword">jr </span>$<span class="number">2</span></span><br><span class="line"><span class="keyword">ori </span>$<span class="number">3</span>,$<span class="number">3</span>,<span class="number">0x0003</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># lw、lh 没有字对齐</span></span><br><span class="line"><span class="keyword">lw </span>$<span class="number">2</span>,<span class="number">0</span>($<span class="number">3</span>)</span><br><span class="line"><span class="keyword">lh </span>$<span class="number">2</span>,<span class="number">1</span>($<span class="number">0</span>)</span><br><span class="line"><span class="comment"># lh、lb 取Timer寄存器的值</span></span><br><span class="line"><span class="keyword">ori </span>$<span class="number">4</span>,$<span class="number">4</span>,<span class="number">0x7f00</span></span><br><span class="line"><span class="keyword">lh </span>$<span class="number">5</span>,<span class="number">0</span>($<span class="number">4</span>)</span><br><span class="line"><span class="keyword">lb </span>$<span class="number">5</span>,<span class="number">20</span>($<span class="number">4</span>)</span><br><span class="line"><span class="comment"># 计算地址加法溢出</span></span><br><span class="line"><span class="keyword">lui </span>$<span class="number">6</span>,<span class="number">65535</span></span><br><span class="line"><span class="keyword">ori </span>$<span class="number">6</span>,$<span class="number">6</span>,<span class="number">65535</span></span><br><span class="line"><span class="keyword">lw </span>$<span class="number">7</span>,<span class="number">1</span>($<span class="number">6</span>)</span><br><span class="line"><span class="comment"># 取数地址超出范围</span></span><br><span class="line"><span class="keyword">ori </span>$<span class="number">7</span>,<span class="number">0x7f0c</span></span><br><span class="line"><span class="keyword">lw </span>$<span class="number">7</span>,<span class="number">0</span>($<span class="number">7</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># sw、sh没有字对齐</span></span><br><span class="line"><span class="keyword">sw </span>$<span class="number">2</span>,<span class="number">0</span>($<span class="number">3</span>)</span><br><span class="line"><span class="keyword">sh </span>$<span class="number">2</span>,<span class="number">1</span>($<span class="number">0</span>)</span><br><span class="line"><span class="comment"># sh、sb取Timer寄存器的值</span></span><br><span class="line"><span class="keyword">sw </span>$<span class="number">5</span>,<span class="number">0</span>($<span class="number">4</span>)<span class="comment">#应该没错</span></span><br><span class="line"><span class="keyword">sh </span>$<span class="number">5</span>,<span class="number">0</span>($<span class="number">4</span>)</span><br><span class="line"><span class="keyword">sb </span>$<span class="number">5</span>,<span class="number">20</span>($<span class="number">4</span>)</span><br><span class="line"><span class="comment"># 计算地址加法溢出</span></span><br><span class="line"><span class="keyword">lui </span>$<span class="number">6</span>,<span class="number">65535</span></span><br><span class="line"><span class="keyword">ori </span>$<span class="number">6</span>,$<span class="number">6</span>,<span class="number">65535</span></span><br><span class="line"><span class="keyword">sw </span>$<span class="number">7</span>,<span class="number">1</span>($<span class="number">6</span>)</span><br><span class="line"><span class="comment"># 向计时器Count寄存器存值</span></span><br><span class="line"><span class="keyword">sw </span>$<span class="number">7</span>,-<span class="number">4</span>($<span class="number">7</span>)</span><br><span class="line"><span class="comment"># 存数地址超出范围</span></span><br><span class="line"><span class="keyword">sw </span>$<span class="number">7</span>,<span class="number">100</span>($<span class="number">7</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># syscall 测试</span></span><br><span class="line"><span class="keyword">syscall</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line"><span class="comment"># 未知指令</span></span><br><span class="line"><span class="keyword">nor </span>$<span class="number">2</span>,$<span class="number">3</span>,$<span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 算术溢出</span></span><br><span class="line"><span class="keyword">addi </span>$<span class="number">1</span>,$<span class="number">0</span>,<span class="number">1</span></span><br><span class="line"><span class="keyword">sub </span>$<span class="number">8</span>,$<span class="number">0</span>,$<span class="number">1</span></span><br><span class="line"><span class="keyword">add </span>$<span class="number">9</span>,$<span class="number">8</span>,$<span class="number">6</span> <span class="comment"># 不应溢出</span></span><br><span class="line"><span class="keyword">sub </span>$<span class="number">9</span>,$<span class="number">6</span>,$<span class="number">8</span> <span class="comment"># 溢出</span></span><br><span class="line"><span class="keyword">add </span>$<span class="number">9</span>,$<span class="number">6</span>,$<span class="number">7</span> <span class="comment"># 溢出</span></span><br><span class="line"><span class="keyword">sub </span>$<span class="number">9</span>,$<span class="number">0</span>,$<span class="number">6</span></span><br><span class="line"><span class="keyword">addi </span>$<span class="number">9</span>,$<span class="number">9</span>,-<span class="number">100</span> <span class="comment"># 溢出</span></span><br><span class="line"><span class="symbol"></span></span><br><span class="line"><span class="symbol"></span></span><br><span class="line"><span class="symbol">end:</span></span><br><span class="line"><span class="keyword">beq </span>$<span class="number">0</span>,$<span class="number">0</span>,end <span class="comment"># 死循环</span></span><br><span class="line"><span class="keyword">nop</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line"><span class="comment"># 异常处理程序</span></span><br><span class="line">.ktext <span class="number">0x4180</span></span><br><span class="line"><span class="keyword">mfc0 </span>$<span class="built_in">k0</span>,$<span class="number">12</span></span><br><span class="line"><span class="keyword">mfc0 </span>$<span class="built_in">k0</span>,$<span class="number">13</span></span><br><span class="line"><span class="keyword">mfc0 </span>$<span class="built_in">k0</span>,$<span class="number">14</span></span><br><span class="line"><span class="keyword">addi </span>$<span class="built_in">k0</span>,$<span class="built_in">k0</span>,<span class="number">4</span></span><br><span class="line"><span class="keyword">mtc0 </span>$<span class="built_in">k0</span>,$<span class="number">14</span></span><br><span class="line"><span class="keyword">eret</span></span><br><span class="line"><span class="keyword"></span><span class="keyword">add </span>$<span class="number">2</span>,$<span class="number">2</span>,$<span class="number">2</span> <span class="comment"># 应当没有延迟槽</span></span><br></pre></td></tr></table></figure><h1 id="课上测试">课上测试</h1><p>四个强测分别是指令、异常、中断、冒险，建议课下用 COT 和 MARS、朋友的 CPU 对拍，对拍对的人多了，就形成了链条，要么大家一起过，要么大家一起死（bu）</p><p>加一条指令 <code>monitor</code>：</p><p>在 CP0 中增加三个 32 位宽的寄存器 <code>DMBoundaryHi(No.18)  DMBoundaryLo(No.19)  DMEnable(No.20)</code>。这三个寄存器都能被 <code>mfc0</code> 读取，但是只能用 <code>monitor</code> 写入。此外，<code>monitor</code> 只能写入这三个寄存器，而 <code>mtc0</code> 只能写入 <code>SR</code> 和 <code>EPC</code>。</p><p>写入的数值必须满足 <code>DMBoundaryHi &gt; DMBoundaryLo</code>（无符号比较），否则触发 AdEs 异常，异常码 <code>5'd5</code>。</p><p><code>DMEnable</code> 的高 16 位的 1 的个数严格大于低 16 位的 1 的个数，则允许监控 <code>sw</code> 指令的行为。</p><p>监控 <code>sw</code> 的行为：在允许监控 <code>sw</code> 指令的前提下，如果 <code>sw</code> 读写的<ins>所有字节地址</ins>超出了 <code>[DMBoundaryLo, DMBoundaryHi)</code> 这个前闭后开的区间，则触发 AdEs 异常，异常码 <code>5'd5</code>。</p><p>不说了，注意所谓<ins>所有字节地址</ins>，<code>sw</code> 计算出的地址是第一个字节的地址，再往后三个也是要存入的，因此当 ALU 算出的结果 <strong>+3</strong> 超范围时才发生异常。</p>]]></content:encoded>
      
      
      <category domain="https://samuflore.top/categories/2025-2026-%E5%AD%B8%E5%B9%B4/">2025 - 2026 學年</category>
      
      <category domain="https://samuflore.top/categories/2025-2026-%E5%AD%B8%E5%B9%B4/%E8%A8%88%E7%AE%97%E6%A9%9F%E7%B5%84%E6%88%90%E5%8E%9F%E7%90%86/">計算機組成原理</category>
      
      
      <category domain="https://samuflore.top/tags/CO/">CO</category>
      
      <category domain="https://samuflore.top/tags/MIPS/">MIPS</category>
      
      <category domain="https://samuflore.top/tags/Verilog/">Verilog</category>
      
      <category domain="https://samuflore.top/tags/P7/">P7</category>
      
      
      <comments>https://samuflore.top/posts/28be479a/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>[CO P6]Verilog 设计五级流水线 CPU-2</title>
      <link>https://samuflore.top/posts/905092e9/</link>
      <guid>https://samuflore.top/posts/905092e9/</guid>
      <pubDate>Mon, 01 Dec 2025 13:15:56 GMT</pubDate>
      
      <description>&lt;iframe frameborder=&quot;no&quot; border=&quot;0&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; width=&quot;530&quot; height=&quot;86&quot; src=&quot;//music.163.com/outchain/player?type=2&amp;id=2085117641&amp;auto=0&amp;height=66&quot;&gt;&lt;/iframe&gt;
&lt;h1 id=&quot;序&quot;&gt;序&lt;/h1&gt;
&lt;p&gt;我去，这才是我最接近 AK 的一次呃呃……&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="530" height="86" src="//music.163.com/outchain/player?type=2&id=2085117641&auto=0&height=66"></iframe><h1 id="序">序</h1><p>我去，这才是我最接近 AK 的一次呃呃……</p><span id="more"></span><h1 id="内存外置">内存外置</h1><p>负责存储数据的 DM 和指令的 IM 并不是 CPU 的一部分，因此我们需要将其从 CPU 架构中移除。<br><img src="/posts/905092e9/%E6%9E%B6%E6%9E%84.png" alt="新的架构"></p><h1 id="新增的设计草稿">新增的设计草稿</h1><p>已实现指令:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">add, sub, and, or, slt, sltu, lui</span><br><span class="line">addi, andi, ori</span><br><span class="line">lb, lh, lw, sb, sh, sw</span><br><span class="line">mult, multu, div, divu, mfhi, mflo, mthi, mtlo</span><br><span class="line">beq, bne, jal, jr</span><br></pre></td></tr></table></figure><h2 id="设计-MDU">设计 MDU</h2><p>MDU 与 ALU 并列存在于 E 级，负责计算和乘除法相关指令，以及读写 HI 和 LO 两个寄存器。端口定义如下：</p><table><thead><tr><th>名称</th><th>种类</th><th>位宽</th><th>方向</th><th>备注</th></tr></thead><tbody><tr><td>clk</td><td>wire</td><td>1</td><td>I</td><td>时钟信号</td></tr><tr><td>reset</td><td>wire</td><td>1</td><td>I</td><td>同步复位信号</td></tr><tr><td>inputA</td><td>wire</td><td>31:0</td><td>I</td><td>第一个操作数</td></tr><tr><td>inputB</td><td>wire</td><td>31:0</td><td>I</td><td>第二个操作数</td></tr><tr><td>instr_type</td><td>wire</td><td>5:0</td><td>I</td><td>指令种类</td></tr><tr><td>start</td><td>wire</td><td>1</td><td>I</td><td>start 为 1 时，MDU 开始运算，并将 busy 置为 1 若干周期</td></tr><tr><td>outputB</td><td>wire</td><td>31:0</td><td>O</td><td>MDU 输出结果，视情况与 ALU 输出的 outputA 进行选择</td></tr><tr><td>busy</td><td>wire</td><td>1</td><td>O</td><td>MDU 使用中信号。当其为 1 时，阻塞所有需要用到 MDU 的指令</td></tr></tbody></table><h2 id="修改-ST">修改 ST</h2><p>ST 是我原来的为 DM 设计的预处理模块。因为 DM 外置，因此需要进行修改。将写入 DM 的使能信号改为 4 位宽，分别对应 4 个字节的写入使能，这样就能实现 <code>sb st</code> 等功能。</p><h1 id="思考题">思考题</h1><ol><li class="lvl-3"><p>为什么需要有单独的乘除法部件而不是整合进 ALU？为何需要有独立的 HI、LO 寄存器？<br><strong>答</strong>：乘除法运算时间长，且计算结果不需要立刻写入 GRF 或 DM 中。如果整合进 ALU，效率低下。HI 和 LO 独立保存乘除法结果，不会立即使用，即在计算中不影响 ALU 的正常流水。</p></li><li class="lvl-3"><p>真实的流水线 CPU 是如何使用实现乘除法的？请查阅相关资料进行简单说明。<br><strong>答</strong>：首先CPU会初始化三个通用寄存器用来存放被乘数，乘数，部分积的二进制数，部分积寄存器初始化为 0。然后在判断乘数寄存器的低位是低电平还是高电平：如果为低（0）则将乘数寄存器右移一位，同时将部分积寄存器也右移一位，乘数寄存器低位溢出的一位丢弃，部分积寄存器低位溢出的一位填充到乘数寄存器的高位，同时部分积寄存器高位补 0。如果为 1 则将部分积寄存器加上被乘数寄存器，在进移位操作。<br>当所有乘数位处理完成后部分积寄存器做高位乘数寄存器做低位就是最终乘法结果。</p></li><li class="lvl-3"><p>请结合自己的实现分析，你是如何处理 Busy 信号带来的周期阻塞的？<br><strong>答</strong>：首先 <code>busy</code> 信号只影响进入 MDU 的指令。故需要在 Controller 输出一个判断当前指令是否为进入 MDU 指令的信号 <code>D_is_mult</code>。MDU 负责根据正在起作用的指令进行倒计时，计时结束前 busy 均为 1，用<code>(D_ismult &amp;&amp; (E_start || E_busy))</code> 这个条件来判断是否进行阻塞。</p></li><li class="lvl-3"><p>请问采用字节使能信号的方式处理写指令有什么好处？（提示：从清晰性、统一性等角度考虑）<br><strong>答</strong>：首先第 n 位使能信号为 1 就表明第 n 字节需要写入，形成一一映射关系，很清晰。其次对于所有关于按字节/半字写入的指令，都有统一的提供使能信号的方式，提高了扩展性。</p></li><li class="lvl-3"><p>请思考，我们在按字节读和按字节写时，实际从 DM 获得的数据和向 DM 写入的数据是否是一字节？在什么情况下我们按字节读和按字节写的效率会高于按字读和按字写呢？<br><strong>答</strong>：不是。需要高频进行按字节读写时效率更高。</p></li><li class="lvl-3"><p>为了对抗复杂性你采取了哪些抽象和规范手段？这些手段在译码和处理数据冲突的时候有什么样的特点与帮助？<br><strong>答</strong>：严格按照流水级进行信号的命名，这样方便在信号多的时候分清楚级次。为易混淆的信号增加特殊的命名，比如写入 DM 的数据和 写入 GRF 的数据都能用 <code>data</code> 表示，就分别用 <code>DM_data GRF_data</code> 表示。</p></li><li class="lvl-3"><p>在本实验中你遇到了哪些不同指令类型组合产生的冲突？你又是如何解决的？相应的测试样例是什么样的？<br><strong>答</strong>：<br>两条计算指令紧邻时的情况，转发：</p></li></ol><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">addi </span>$<span class="built_in">t0</span>, $<span class="built_in">t0</span>, <span class="number">0x00000001</span></span><br><span class="line"><span class="keyword">ori </span>$<span class="built_in">t0</span>, $<span class="built_in">t0</span>, <span class="number">0x00000000</span></span><br></pre></td></tr></table></figure><p>一条访存类指令紧跟一条计算类指令的情况，阻塞：</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">lw </span>$<span class="built_in">t0</span>, <span class="number">0</span>($<span class="number">0</span>)</span><br><span class="line"><span class="keyword">addi </span>$<span class="built_in">t0</span>, $<span class="built_in">t0</span>, <span class="number">0x00000001</span></span><br></pre></td></tr></table></figure><ol start="8"><li class="lvl-3"><p>如果你是手动构造的样例，请说明构造策略，说明你的测试程序如何保证<strong>覆盖</strong>了所有需要测试的情况；如果你是<strong>完全随机</strong>生成的测试样例，请思考完全随机的测试程序有何不足之处；如果你在生成测试样例时采用了<strong>特殊的策略</strong>，比如构造连续数据冒险序列，请你描述一下你使用的策略如何<strong>结合了随机性</strong>达到强测的效果。<br><strong>答</strong>：使用随机生成的测试数据，可能出现阻塞，转发的触发情况测试不足等问题，需要自行增加一些相关的测试。</p></li></ol><h1 id="测试">测试</h1><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment"># ==========================================</span></span><br><span class="line">    <span class="comment"># 1. 初始化与基础运算</span></span><br><span class="line">    <span class="comment"># ==========================================</span></span><br><span class="line">    <span class="keyword">addi </span>$<span class="built_in">s0</span>, $<span class="built_in">zero</span>, <span class="number">0</span>      <span class="comment"># $s0 用于累积校验和 (Checksum)</span></span><br><span class="line">    <span class="keyword">lui </span> $<span class="built_in">t0</span>, <span class="number">0x0000</span>        <span class="comment"># $t0 = 0 (Data Base Address)</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">addi </span>$<span class="built_in">t1</span>, $<span class="built_in">zero</span>, <span class="number">10</span>     <span class="comment"># $t1 = 10</span></span><br><span class="line">    <span class="keyword">addi </span>$<span class="built_in">t2</span>, $<span class="built_in">zero</span>, <span class="number">20</span>     <span class="comment"># $t2 = 20</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 测试 add/sub/or/and</span></span><br><span class="line">    <span class="keyword">add </span> $<span class="built_in">t3</span>, $<span class="built_in">t1</span>, $<span class="built_in">t2</span>      <span class="comment"># $t3 = 30</span></span><br><span class="line">    <span class="keyword">sub </span> $<span class="built_in">t4</span>, $<span class="built_in">t3</span>, $<span class="built_in">t1</span>      <span class="comment"># [Hazard: EX-EX] $t4 = 30 - 10 = 20</span></span><br><span class="line">    <span class="keyword">or </span>  $<span class="built_in">t5</span>, $<span class="built_in">t1</span>, $<span class="built_in">t2</span>      <span class="comment"># $t5 = 10 | 20 = 30</span></span><br><span class="line">    <span class="keyword">and </span> $<span class="built_in">t6</span>, $<span class="built_in">t1</span>, $<span class="built_in">t2</span>      <span class="comment"># $t6 = 10 &amp; 20 = 0 (1010 &amp; 10100) -&gt; wait, 10=0xA, 20=0x14. 01010 &amp; 10100 = 0.</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">add </span> $<span class="built_in">s0</span>, $<span class="built_in">s0</span>, $<span class="built_in">t3</span>      <span class="comment"># Checksum += 30</span></span><br><span class="line">    <span class="keyword">add </span> $<span class="built_in">s0</span>, $<span class="built_in">s0</span>, $<span class="built_in">t4</span>      <span class="comment"># Checksum += 20</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># ==========================================</span></span><br><span class="line">    <span class="comment"># 2. 乘除法与 HI/LO (MD Extension)</span></span><br><span class="line">    <span class="comment"># ==========================================</span></span><br><span class="line">    <span class="comment"># 测试 mult (有符号)</span></span><br><span class="line">    <span class="keyword">addi </span>$<span class="built_in">t7</span>, $<span class="built_in">zero</span>, -<span class="number">2</span>     <span class="comment"># $t7 = -2</span></span><br><span class="line">    <span class="keyword">mult </span>$<span class="built_in">t1</span>, $<span class="built_in">t7</span>           <span class="comment"># 10 * (-2) = -20. Hi=FFFFFFFF, Lo=FFFFFFEC</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 测试 mflo 在 mult 后立即读取 (应该 Stall 或正确读取)</span></span><br><span class="line">    <span class="keyword">mflo </span>$<span class="built_in">t8</span>                <span class="comment"># $t8 = -20</span></span><br><span class="line">    <span class="keyword">mfhi </span>$<span class="built_in">t9</span>                <span class="comment"># $t9 = -1</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">add </span> $<span class="built_in">s0</span>, $<span class="built_in">s0</span>, $<span class="built_in">t8</span>      <span class="comment"># Checksum += -20</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 测试 divu (无符号)</span></span><br><span class="line">    <span class="comment"># $t2 = 20, $t1 = 10</span></span><br><span class="line">    <span class="keyword">addi </span>$<span class="built_in">k0</span>, $<span class="built_in">zero</span>, <span class="number">3</span></span><br><span class="line">    <span class="keyword">divu </span>$<span class="built_in">t2</span>, $<span class="built_in">k0</span>           <span class="comment"># 20 / 3 = 6 ... 2</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">mflo </span>$<span class="built_in">s1</span>                <span class="comment"># $s1 = 6 (Quotient)</span></span><br><span class="line">    <span class="keyword">mfhi </span>$<span class="built_in">s2</span>                <span class="comment"># $s2 = 2 (Remainder)</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">add </span> $<span class="built_in">s0</span>, $<span class="built_in">s0</span>, $<span class="built_in">s1</span>      <span class="comment"># Checksum += 6</span></span><br><span class="line">    <span class="keyword">add </span> $<span class="built_in">s0</span>, $<span class="built_in">s0</span>, $<span class="built_in">s2</span>      <span class="comment"># Checksum += 2</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 测试 mtlo/mthi/mflo/mfhi 数据传递</span></span><br><span class="line">    <span class="keyword">addi </span>$<span class="built_in">k1</span>, $<span class="built_in">zero</span>, <span class="number">100</span></span><br><span class="line">    <span class="keyword">mtlo </span>$<span class="built_in">k1</span></span><br><span class="line">    <span class="keyword">mflo </span>$<span class="built_in">k1</span>                <span class="comment"># $k1 应该读回 100</span></span><br><span class="line">    <span class="keyword">add </span> $<span class="built_in">s0</span>, $<span class="built_in">s0</span>, $<span class="built_in">k1</span>      <span class="comment"># Checksum += 100</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ==========================================</span></span><br><span class="line">    <span class="comment"># 3. 内存访问与 Load-Use 冒险</span></span><br><span class="line">    <span class="comment"># ==========================================</span></span><br><span class="line">    <span class="comment"># 准备数据</span></span><br><span class="line">    <span class="keyword">addi </span>$<span class="built_in">a0</span>, $<span class="built_in">zero</span>, <span class="number">0x1234</span></span><br><span class="line">    <span class="keyword">sll </span> $<span class="built_in">a0</span>, $<span class="built_in">a0</span>, <span class="number">16</span>       <span class="comment"># $a0 = 0x12340000</span></span><br><span class="line">    <span class="keyword">ori </span> $<span class="built_in">a0</span>, $<span class="built_in">a0</span>, <span class="number">0x5678</span>   <span class="comment"># $a0 = 0x12345678</span></span><br><span class="line">    <span class="keyword">sw </span>  $<span class="built_in">a0</span>, <span class="number">0</span>($<span class="built_in">t0</span>)        <span class="comment"># Mem[0] = 0x12345678</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 测试 SB (Store Byte)</span></span><br><span class="line">    <span class="keyword">addi </span>$<span class="built_in">a1</span>, $<span class="built_in">zero</span>, <span class="number">0xFF</span></span><br><span class="line">    <span class="keyword">sb </span>  $<span class="built_in">a1</span>, <span class="number">4</span>($<span class="built_in">t0</span>)        <span class="comment"># Mem[4] 低字节 = FF</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 测试 Load-Use Stall</span></span><br><span class="line">    <span class="keyword">lw </span>  $<span class="built_in">a2</span>, <span class="number">0</span>($<span class="built_in">t0</span>)        <span class="comment"># $a2 = 0x12345678</span></span><br><span class="line">    <span class="keyword">add </span> $<span class="built_in">a3</span>, $<span class="built_in">a2</span>, $<span class="built_in">a2</span>      <span class="comment"># [Load-Use Hazard] 必须 Stall. $a3 = ...F0</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 测试 LB (Load Byte Signed)</span></span><br><span class="line">    <span class="keyword">lb </span>  $<span class="built_in">a3</span>, <span class="number">4</span>($<span class="built_in">t0</span>)        <span class="comment"># Mem[4] 是 0xFF, lb 扩展为 0xFFFFFFFF (-1)</span></span><br><span class="line">    <span class="keyword">add </span> $<span class="built_in">s0</span>, $<span class="built_in">s0</span>, $<span class="built_in">a3</span>      <span class="comment"># Checksum += -1</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># ==========================================</span></span><br><span class="line">    <span class="comment"># 4. 控制流与延迟槽</span></span><br><span class="line">    <span class="comment"># ==========================================</span></span><br><span class="line">    <span class="comment"># 测试 BEQ (Not Taken)</span></span><br><span class="line">    <span class="keyword">beq </span> $<span class="built_in">t1</span>, $<span class="built_in">t2</span>, fail_jump</span><br><span class="line">    <span class="keyword">addi </span>$<span class="built_in">s0</span>, $<span class="built_in">s0</span>, <span class="number">1</span>        <span class="comment"># [Delay Slot] 必须执行 Checksum += 1</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 测试 JAL</span></span><br><span class="line">    <span class="keyword">jal </span> my_func</span><br><span class="line">    <span class="keyword">addi </span>$<span class="built_in">s0</span>, $<span class="built_in">s0</span>, <span class="number">2</span>        <span class="comment"># [Delay Slot] 必须执行 Checksum += 2</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 返回后继续</span></span><br><span class="line">    <span class="keyword">j </span>   finish</span><br><span class="line">    <span class="keyword">nop</span></span><br><span class="line"><span class="keyword"></span><span class="symbol"></span></span><br><span class="line"><span class="symbol">fail_jump:</span></span><br><span class="line">    <span class="keyword">addi </span>$<span class="built_in">s0</span>, $<span class="built_in">zero</span>, <span class="number">0xBAD</span>  <span class="comment"># 错误标记</span></span><br><span class="line">    <span class="keyword">j </span>   finish</span><br><span class="line">    <span class="keyword">nop</span></span><br><span class="line"><span class="keyword"></span><span class="symbol"></span></span><br><span class="line"><span class="symbol">my_func:</span></span><br><span class="line">    <span class="comment"># 测试 JALR</span></span><br><span class="line">    <span class="keyword">addi </span>$<span class="built_in">s0</span>, $<span class="built_in">s0</span>, <span class="number">10</span>       <span class="comment"># Checksum += 10</span></span><br><span class="line">    <span class="keyword">jalr </span>$<span class="built_in">ra</span></span><br><span class="line">    <span class="keyword">addi </span>$<span class="built_in">s0</span>, $<span class="built_in">s0</span>, <span class="number">5</span>        <span class="comment"># [Delay Slot] 必须执行 Checksum += 5 (在跳转动作发生前执行)</span></span><br><span class="line"><span class="symbol"></span></span><br><span class="line"><span class="symbol">finish:</span></span><br><span class="line">    <span class="comment"># 最终结果写回 Mem[0x50] (80)</span></span><br><span class="line">    <span class="comment"># 预期 Checksum 计算:</span></span><br><span class="line">    <span class="comment"># Init: 0</span></span><br><span class="line">    <span class="comment"># ALU: +30, +20 = 50</span></span><br><span class="line">    <span class="comment"># MD: -20, +6, +2, +100 = 88 (Accum: 138)</span></span><br><span class="line">    <span class="comment"># MEM: -1 = 137</span></span><br><span class="line">    <span class="comment"># Branch Slot: +1 = 138</span></span><br><span class="line">    <span class="comment"># JAL Slot: +2 = 140</span></span><br><span class="line">    <span class="comment"># Func: +10 = 150</span></span><br><span class="line">    <span class="comment"># JALR Slot: +5 = 155 (0x9B)</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">addi </span>$<span class="built_in">t9</span>, $<span class="built_in">zero</span>, <span class="number">0x50</span></span><br><span class="line">    <span class="keyword">sw </span>  $<span class="built_in">s0</span>, <span class="number">0</span>($<span class="built_in">t9</span>)        <span class="comment"># 将校验和写入地址 0x50</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 结束，不再进行任何操作，等待 Testbench 捕获</span></span><br><span class="line">    <span class="keyword">nop</span></span><br><span class="line"><span class="keyword"></span>    <span class="keyword">nop</span></span><br><span class="line"><span class="keyword"></span>    <span class="keyword">nop</span></span><br><span class="line"><span class="keyword"></span>    <span class="keyword">nop</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="第一题-MUJICA">第一题 MUJICA</h1><p>MUJICA，全称 Mask Update Joint Immediate Conditional Add</p><div class="note info">            <p>细节 Mask，细节 Update，细节 Joint，细节 Immediate，细节 Conditional，细节 Add。</p>          </div><table><thead><tr><th>31:26</th><th>25:21</th><th>20:16</th><th>15:0</th></tr></thead><tbody><tr><td>opcode</td><td>rs</td><td>rt</td><td>immediate</td></tr><tr><td>110100</td><td></td><td></td><td></td></tr></tbody></table><p><code>mujica rs rt immediate</code></p><p>RTL 如下：</p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi>d</mi><mi>e</mi><mi>f</mi><mtext>  </mtext><mi>c</mi><mi>o</mi><mi>u</mi><mi>n</mi><mi>t</mi><mi mathvariant="normal">_</mi><mi>o</mi><mi>n</mi><mi>e</mi><mi>s</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>:</mo><mtext>计算</mtext><mtext>  </mtext><mi>x</mi><mtext>  </mtext><mtext>中</mtext><mtext>  </mtext><mn>1</mn><mtext>  </mtext><mtext>的个数</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>imm_extend</mtext><mo>←</mo><mi>s</mi><mi>i</mi><mi>g</mi><mi>n</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>x</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>d</mi><mo stretchy="false">(</mo><mtext>immediate</mtext><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>ones_count</mtext><mo>←</mo><mi>c</mi><mi>o</mi><mi>u</mi><mi>n</mi><mi>t</mi><mi mathvariant="normal">_</mi><mi>o</mi><mi>n</mi><mi>e</mi><mi>s</mi><mo stretchy="false">(</mo><mtext>immediate</mtext><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi>i</mi><mi>f</mi><mtext>  </mtext><mtext>ones_count</mtext><mspace></mspace><mspace width="1em"><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow><mtext> </mtext><mtext> </mtext><mn>2</mn><mo>=</mo><mn>0</mn><mtext>  </mtext><mi>t</mi><mi>h</mi><mi>e</mi><mi>n</mi></mspace></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"><mtext>temp</mtext><mo>←</mo><mtext>GPR[rs]</mtext><mtext>  </mtext><mi mathvariant="normal">&amp;</mi><mtext>  </mtext><mtext>imm_extend</mtext></mspace></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"><mtext>GPR[rt]</mtext><mo>←</mo><mtext>temp</mtext><mtext>  </mtext><mo>+</mo><mtext>  </mtext><mtext>GPR[rt]</mtext></mspace></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi>e</mi><mi>l</mi><mi>s</mi><mi>e</mi><mtext>  </mtext><mi>t</mi><mi>h</mi><mi>e</mi><mi>n</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"><mtext>temp</mtext><mo>←</mo><mtext>GPR[rs]</mtext><mtext>  </mtext><mi mathvariant="normal">∣</mi><mtext>  </mtext><mtext>imm_extend</mtext></mspace></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"><mtext>GPR[rt]</mtext><mo>←</mo><mtext>temp</mtext><mtext>  </mtext><mo>∧</mo><mtext>  </mtext><mtext>GPR[rt]</mtext></mspace></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi>e</mi><mi>n</mi><mi>d</mi><mi>i</mi><mi>f</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}&amp; def\;count\_ones(x):计算\;x\;中\;1\;的个数 \\&amp; \text{imm\_extend} \leftarrow sign\_extend(\text{immediate}) \\&amp; \text{ones\_count} \leftarrow count\_ones(\text{immediate}) \\&amp; if \; \text{ones\_count} \mod 2 = 0 \;then \\&amp; \quad  \text{temp} \leftarrow \text{GPR[rs]} \; \&amp; \; \text{imm\_extend} \\&amp; \quad \text{GPR[rt]} \leftarrow \text{temp} \; + \; \text{GPR[rt]} \\&amp; else \; then \\&amp; \quad  \text{temp} \leftarrow \text{GPR[rs]} \; | \; \text{imm\_extend} \\&amp; \quad \text{GPR[rt]} \leftarrow \text{temp} \; \wedge \; \text{GPR[rt]} \\&amp; endif\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:15em;vertical-align:-7.25em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:7.75em;"><span style="top:-9.75em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-8.25em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-6.75em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-5.25em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-3.75em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-0.75em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:0.75em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:2.25em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:3.75em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:7.25em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:7.75em;"><span style="top:-9.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">u</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mord" style="margin-right:0.02778em;">_</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord mathnormal">es</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord cjk_fallback">计算</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord cjk_fallback">中</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord cjk_fallback">的个数</span></span></span><span style="top:-8.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord text"><span class="mord">imm_extend</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mord" style="margin-right:0.02778em;">_</span><span class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord text"><span class="mord">immediate</span></span><span class="mclose">)</span></span></span><span style="top:-6.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord text"><span class="mord">ones_count</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">u</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mord" style="margin-right:0.02778em;">_</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord mathnormal">es</span><span class="mopen">(</span><span class="mord text"><span class="mord">immediate</span></span><span class="mclose">)</span></span></span><span style="top:-5.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord text"><span class="mord">ones_count</span></span><span class="mspace allowbreak"></span><span class="mspace" style="margin-right:1em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span></span></span><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:1em;"></span><span class="mord text"><span class="mord">temp</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord text"><span class="mord">GPR[rs]</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">&amp;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord text"><span class="mord">imm_extend</span></span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:1em;"></span><span class="mord text"><span class="mord">GPR[rt]</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord text"><span class="mord">temp</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord text"><span class="mord">GPR[rt]</span></span></span></span><span style="top:-0.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">se</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span></span></span><span style="top:0.59em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:1em;"></span><span class="mord text"><span class="mord">temp</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord text"><span class="mord">GPR[rs]</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord text"><span class="mord">imm_extend</span></span></span></span><span style="top:2.09em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:1em;"></span><span class="mord text"><span class="mord">GPR[rt]</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord text"><span class="mord">temp</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord text"><span class="mord">GPR[rt]</span></span></span></span><span style="top:3.59em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:7.25em;"><span></span></span></span></span></span></span></span></span></span></span></span><p>不说了，期待第三季。<br>（ps: P6 第一次上机有一题叫 <code>MYGO</code>）</p><h1 id="第二题-BOTTO">第二题 BOTTO</h1><table><thead><tr><th>31:26</th><th>25:21</th><th>20:16</th><th>15:0</th></tr></thead><tbody><tr><td>opcode</td><td>rs</td><td>rt</td><td>offset</td></tr><tr><td>011011</td><td></td><td></td><td></td></tr></tbody></table><p><code>botto rs rt offset</code></p><p>RTL 如下：</p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi>d</mi><mi>e</mi><mi>f</mi><mtext>  </mtext><mi>h</mi><mi>a</mi><mi>m</mi><mi>m</mi><mi>i</mi><mi>n</mi><mi>g</mi><mi mathvariant="normal">_</mi><mi>d</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>:</mo><mtext>计算</mtext><mtext>  </mtext><mi>x</mi><mtext>  </mtext><mtext>和</mtext><mtext>  </mtext><mi>y</mi><mtext>  </mtext><mtext>的汉明距离</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>hd</mtext><mo>←</mo><mi>h</mi><mi>a</mi><mi>m</mi><mi>m</mi><mi>i</mi><mi>n</mi><mi>g</mi><mi mathvariant="normal">_</mi><mi>d</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi><mo stretchy="false">(</mo><mtext>GPR[rs], GPR[rt]</mtext><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi>i</mi><mi>f</mi><mtext>  </mtext><mi>h</mi><mi>d</mi><mo>&lt;</mo><mn>8</mn><mtext>  </mtext><mi>t</mi><mi>h</mi><mi>e</mi><mi>n</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"><mtext>PC</mtext><mo>←</mo><mtext>PC</mtext><mtext>  </mtext><mo>+</mo><mtext>  </mtext><mn>4</mn><mtext>  </mtext><mo>+</mo><mtext>  </mtext><mi>s</mi><mi>i</mi><mi>g</mi><mi>n</mi><mi mathvariant="normal">_</mi><mi>e</mi><mi>x</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>d</mi><mo stretchy="false">(</mo><mtext>offset</mtext><mi mathvariant="normal">∥</mi><msup><mn>0</mn><mn>2</mn></msup><mo stretchy="false">)</mo></mspace></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"><mtext>GPR[rt]</mtext><mo>←</mo><mtext>hd</mtext></mspace></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi>e</mi><mi>l</mi><mi>s</mi><mi>e</mi><mtext>  </mtext><mi>i</mi><mi>f</mi><mtext>  </mtext><mi>h</mi><mi>d</mi><mo>≤</mo><mn>24</mn><mtext>  </mtext><mi>t</mi><mi>h</mi><mi>e</mi><mi>n</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"><mtext>PC</mtext><mo>←</mo><mtext>PC</mtext><mtext>  </mtext><mo>+</mo><mtext>  </mtext><mn>4</mn></mspace></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"><mtext>GPR[rs]</mtext><mo>←</mo><mtext>GPR[rt]</mtext><mo>&gt;</mo><mo>&gt;</mo><mo>&gt;</mo><mtext>hd</mtext></mspace></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi>e</mi><mi>l</mi><mi>s</mi><mi>e</mi><mtext>  </mtext><mi>t</mi><mi>h</mi><mi>e</mi><mi>n</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"><mtext>PC</mtext><mo>←</mo><mtext>PC</mtext><mtext>  </mtext><mo>+</mo><mtext>  </mtext><mn>4</mn></mspace></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"><mtext>GPR[rs]</mtext><mo>←</mo><mtext>GPR[rs]</mtext><mtext>  </mtext><mi mathvariant="normal">∣</mi><mtext>  </mtext><mtext>GPR[rt]</mtext></mspace></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi>e</mi><mi>n</mi><mi>d</mi><mi>i</mi><mi>f</mi></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}&amp; def \; hamming\_distance(x, y):计算\;x\;和\;y\;的汉明距离 \\&amp; \text{hd} \leftarrow hamming\_distance(\text{GPR[rs], \text{GPR[rt]}}) \\&amp; if \; hd&lt;8\;then \\&amp; \quad \text{PC} \leftarrow \text{PC}\;+\;4\;+\;sign\_extend(\text{offset}\|0^2) \\&amp; \quad \text{GPR[rt]} \leftarrow \text{hd} \\&amp; else \; if \; hd \le24 \; then \\&amp; \quad \text{PC} \leftarrow \text{PC}\;+\;4 \\&amp; \quad \text{GPR[rs]} \leftarrow \text{GPR[rt]} &gt;&gt;&gt; \text{hd} \\&amp; else \; then \\&amp; \quad \text{PC} \leftarrow \text{PC}\;+\;4 \\&amp; \quad \text{GPR[rs]} \leftarrow \text{GPR[rs]} \; | \; \text{GPR[rt]} \\&amp; endif\\\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:18.0241em;vertical-align:-8.7621em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:9.2621em;"><span style="top:-11.2862em;"><span class="pstrut" style="height:2.8641em;"></span><span class="mord"></span></span><span style="top:-9.7862em;"><span class="pstrut" style="height:2.8641em;"></span><span class="mord"></span></span><span style="top:-8.2862em;"><span class="pstrut" style="height:2.8641em;"></span><span class="mord"></span></span><span style="top:-6.7621em;"><span class="pstrut" style="height:2.8641em;"></span><span class="mord"></span></span><span style="top:-5.2621em;"><span class="pstrut" style="height:2.8641em;"></span><span class="mord"></span></span><span style="top:-3.7621em;"><span class="pstrut" style="height:2.8641em;"></span><span class="mord"></span></span><span style="top:-2.2621em;"><span class="pstrut" style="height:2.8641em;"></span><span class="mord"></span></span><span style="top:-0.7621em;"><span class="pstrut" style="height:2.8641em;"></span><span class="mord"></span></span><span style="top:0.7379em;"><span class="pstrut" style="height:2.8641em;"></span><span class="mord"></span></span><span style="top:2.2379em;"><span class="pstrut" style="height:2.8641em;"></span><span class="mord"></span></span><span style="top:3.7379em;"><span class="pstrut" style="height:2.8641em;"></span><span class="mord"></span></span><span style="top:5.2379em;"><span class="pstrut" style="height:2.8641em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:8.7621em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:9.2621em;"><span style="top:-11.4221em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">hammin</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord" style="margin-right:0.02778em;">_</span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">an</span><span class="mord mathnormal">ce</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord cjk_fallback">计算</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord cjk_fallback">和</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord cjk_fallback">的汉明距离</span></span></span><span style="top:-9.9221em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord text"><span class="mord">hd</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">hammin</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord" style="margin-right:0.02778em;">_</span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">an</span><span class="mord mathnormal">ce</span><span class="mopen">(</span><span class="mord text"><span class="mord">GPR[rs], </span><span class="mord text"><span class="mord">GPR[rt]</span></span></span><span class="mclose">)</span></span></span><span style="top:-8.4221em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">h</span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span></span></span><span style="top:-6.8979em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:1em;"></span><span class="mord text"><span class="mord">PC</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord text"><span class="mord">PC</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mord" style="margin-right:0.02778em;">_</span><span class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord text"><span class="mord">offset</span></span><span class="mord">∥</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-5.3979em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:1em;"></span><span class="mord text"><span class="mord">GPR[rt]</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord text"><span class="mord">hd</span></span></span></span><span style="top:-3.8979em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">se</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">h</span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">24</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span></span></span><span style="top:-2.3979em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:1em;"></span><span class="mord text"><span class="mord">PC</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord text"><span class="mord">PC</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">4</span></span></span><span style="top:-0.8979em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:1em;"></span><span class="mord text"><span class="mord">GPR[rs]</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord text"><span class="mord">GPR[rt]</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;&gt;&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord text"><span class="mord">hd</span></span></span></span><span style="top:0.6021em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">se</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span></span></span><span style="top:2.1021em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:1em;"></span><span class="mord text"><span class="mord">PC</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord text"><span class="mord">PC</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">4</span></span></span><span style="top:3.6021em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:1em;"></span><span class="mord text"><span class="mord">GPR[rs]</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord text"><span class="mord">GPR[rs]</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord text"><span class="mord">GPR[rt]</span></span></span></span><span style="top:5.1021em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:8.7621em;"><span></span></span></span></span></span></span></span></span></span></span></span><p>汉明距离的定义是：</p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>h</mi><mi>a</mi><mi>m</mi><mi>m</mi><mi>i</mi><mi>n</mi><mi>g</mi><mi mathvariant="normal">_</mi><mi>d</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mi>c</mi><mi>o</mi><mi>u</mi><mi>n</mi><mi>t</mi><mi mathvariant="normal">_</mi><mi>o</mi><mi>n</mi><mi>e</mi><mi>s</mi><mo stretchy="false">(</mo><mi>x</mi><mo>∧</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">hamming\_distance(x,y) = count\_ones(x \wedge y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.06em;vertical-align:-0.31em;"></span><span class="mord mathnormal">hammin</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord" style="margin-right:0.02778em;">_</span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">an</span><span class="mord mathnormal">ce</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.06em;vertical-align:-0.31em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">u</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mord" style="margin-right:0.02778em;">_</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord mathnormal">es</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span></span><p>其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mi>o</mi><mi>u</mi><mi>n</mi><mi>t</mi><mi mathvariant="normal">_</mi><mi>o</mi><mi>n</mi><mi>e</mi><mi>s</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex"> count\_ones(x) </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.06em;vertical-align:-0.31em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">u</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mord" style="margin-right:0.02778em;">_</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord mathnormal">es</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span> 的定义同第一题，即两数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> 值不同的位的个数。</p><p>这题是条件跳转 + 写入寄存器地址悬空。<br>我的做法是在 D 级计算 <code>hd</code>，以及决定是否跳转（输出相应的 <code>zero</code> 给 NPC）。由于写入寄存器的可能性有两种，要写入的数据也不同，于是添加了一个 <code>wire [1:0] botto_sel</code>，与 <code>hd</code> 一起流水到 E 级进入 ALU。在 ALU 中进行判断要写入的是哪一种结果。然后声明一个 <code>E_exact_A3</code>，在 E 级指令是 <code>botto</code> 的情况下根据 <code>botto_sel</code> 来决定写入 <code>GPR[rs]</code> 或 <code>GPR[rt]</code>，将 <code>E_exact_A3</code> 替换原来的 <code>E_A3</code> 进入流水级寄存器，一直给到 W 级。</p><p>仍旧注意算术右移的实现，记得加 <code>$signed()</code>。</p><h1 id="第三题-LWCM">第三题 LWCM</h1><table><thead><tr><th>31:26</th><th>25:21</th><th>20:16</th><th>15:0</th></tr></thead><tbody><tr><td>opcode</td><td>base</td><td>rt</td><td>offset</td></tr><tr><td>111001</td><td></td><td></td><td></td></tr></tbody></table><p><code>lwcm rt offset(base)</code></p><div class="note info">            <p>本题要求在 M 级加入一个新的 32 位寄存器 WD。WD 在初始化和复位后变成 <code>32'h0</code>，只有 <code>lwcm</code> 可以对其进行读写。</p>          </div><p>RTL 如下：</p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>vaddr</mtext><mo>←</mo><mrow><mtext>GPR[base</mtext><mtext>  </mtext><mtext>+</mtext><mtext>  </mtext><mtext>sign_extend(offset)]</mtext></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>paddr</mtext><mo>←</mo><mi>v</mi><mi>a</mi><mi>d</mi><mi>d</mi><msub><mi>r</mi><mn>31..2</mn></msub><mi mathvariant="normal">∥</mi><msup><mn>0</mn><mn>2</mn></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>memWord</mtext><mo>←</mo><mtext>memory[paddr]</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi>i</mi><mi>f</mi><mtext>  </mtext><mtext>memWord</mtext><mo>=</mo><mtext>WD</mtext><mtext>  </mtext><mi>t</mi><mi>h</mi><mi>e</mi><mi>n</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"><mtext>GPR[rt]</mtext><mo>←</mo><mtext>memWord</mtext></mspace></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi>e</mi><mi>l</mi><mi>s</mi><mi>e</mi><mtext>  </mtext><mi>t</mi><mi>h</mi><mi>e</mi><mi>n</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"><mtext>GPR[26]</mtext><mo>←</mo><mtext>memWord</mtext></mspace></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi>e</mi><mi>n</mi><mi>d</mi><mi>i</mi><mi>f</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>WD</mtext><mo>←</mo><mtext>memWord</mtext></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}&amp; \text{vaddr} \leftarrow \text{GPR[base\;+\;sign\_extend(offset)]} \\&amp; \text{paddr} \leftarrow vaddr_{31..2}\|0^2 \\&amp; \text{memWord} \leftarrow \text{memory[paddr]} \\&amp; if\;\text{memWord} = \text{WD}\;then \\&amp; \quad \text{GPR[rt]} \leftarrow \text{memWord} \\&amp; else \; then \\&amp; \quad \text{GPR[26]} \leftarrow \text{memWord} \\&amp; endif \\&amp; \text{WD} \leftarrow \text{memWord}\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:13.5241em;vertical-align:-6.5121em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:7.0121em;"><span style="top:-9.0362em;"><span class="pstrut" style="height:2.8641em;"></span><span class="mord"></span></span><span style="top:-7.5121em;"><span class="pstrut" style="height:2.8641em;"></span><span class="mord"></span></span><span style="top:-6.0121em;"><span class="pstrut" style="height:2.8641em;"></span><span class="mord"></span></span><span style="top:-4.5121em;"><span class="pstrut" style="height:2.8641em;"></span><span class="mord"></span></span><span style="top:-3.0121em;"><span class="pstrut" style="height:2.8641em;"></span><span class="mord"></span></span><span style="top:-1.5121em;"><span class="pstrut" style="height:2.8641em;"></span><span class="mord"></span></span><span style="top:-0.0121em;"><span class="pstrut" style="height:2.8641em;"></span><span class="mord"></span></span><span style="top:1.4879em;"><span class="pstrut" style="height:2.8641em;"></span><span class="mord"></span></span><span style="top:2.9879em;"><span class="pstrut" style="height:2.8641em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:6.5121em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:7.0121em;"><span style="top:-9.1721em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord text"><span class="mord">vaddr</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord text"><span class="mord">GPR[base</span><span class="mspace" style="margin-right:0.2777em;"></span><span class="mord">+</span><span class="mspace" style="margin-right:0.2777em;"></span><span class="mord">sign_extend(offset)]</span></span></span></span><span style="top:-7.6479em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord text"><span class="mord">paddr</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">a</span><span class="mord mathnormal">dd</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">31..2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∥</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-6.1479em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord text"><span class="mord">memWord</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord text"><span class="mord">memory[paddr]</span></span></span></span><span style="top:-4.6479em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord text"><span class="mord">memWord</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord text"><span class="mord">WD</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span></span></span><span style="top:-3.1479em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:1em;"></span><span class="mord text"><span class="mord">GPR[rt]</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord text"><span class="mord">memWord</span></span></span></span><span style="top:-1.6479em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">se</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span></span></span><span style="top:-0.1479em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:1em;"></span><span class="mord text"><span class="mord">GPR[26]</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord text"><span class="mord">memWord</span></span></span></span><span style="top:1.3521em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span><span style="top:2.8521em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord text"><span class="mord">WD</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord text"><span class="mord">memWord</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:6.5121em;"><span></span></span></span></span></span></span></span></span></span></span></span><p>WD 可以像流水级寄存器那样做一个模块来实现，需要有 <code>clk reset input output</code>，具体逻辑和流水级寄存器一样。<br>然后是执行 <code>lwcm</code> 指令的时候无条件写入 <code>memWord</code>，因此 <code>input</code> 当 M 级指令为 <code>lwcm</code> 的时候为 <code>memWord</code>，否则为 WD 本身的 <code>output</code>，保持其不变。<br><code>memWord</code> 和 <code>WD</code> 的比较结果作为一个信号来改变 <code>M_exact_A3</code>，流给 W 级。实现方法如同第二题。<br>阻塞的时候需要特判，否则会 TLE。</p><p>唉唉，这题我最后一个点出 bug，也不是 TLE，最后也没 de 出来，伤心。看群里说的可能跟 <code>==</code> 比较的两个数中混入了 <code>x</code> 值有关，现在也无从考证了，这题用的 MARS 是课程组魔改中的魔改版，也不可能拿得到。</p><p>P7 加油吧，计组实验终于要结束了~</p>]]></content:encoded>
      
      
      <category domain="https://samuflore.top/categories/2025-2026-%E5%AD%B8%E5%B9%B4/">2025 - 2026 學年</category>
      
      <category domain="https://samuflore.top/categories/2025-2026-%E5%AD%B8%E5%B9%B4/%E8%A8%88%E7%AE%97%E6%A9%9F%E7%B5%84%E6%88%90%E5%8E%9F%E7%90%86/">計算機組成原理</category>
      
      
      <category domain="https://samuflore.top/tags/CO/">CO</category>
      
      <category domain="https://samuflore.top/tags/MIPS/">MIPS</category>
      
      <category domain="https://samuflore.top/tags/Verilog/">Verilog</category>
      
      <category domain="https://samuflore.top/tags/P6/">P6</category>
      
      
      <comments>https://samuflore.top/posts/905092e9/#disqus_thread</comments>
      
    </item>
    
  </channel>
</rss>
